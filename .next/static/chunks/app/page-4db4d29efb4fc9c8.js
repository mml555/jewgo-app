(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3848:function(e,s,t){Promise.resolve().then(t.bind(t,5074))},5074:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return j}});var a=t(7437),r=t(2265),n=t(3823),o=t(8514),i=t(3242),l=t(4033),c=t(5933),d=()=>(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-soft border border-gray-200 overflow-hidden h-[540px] flex flex-col animate-pulse",children:[(0,a.jsx)("div",{className:"relative h-52 w-full bg-gray-200 flex-shrink-0",children:(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 animate-pulse"})}),(0,a.jsxs)("div",{className:"p-4 flex flex-col flex-1",children:[(0,a.jsxs)("div",{className:"mb-4 min-h-[2.5rem] max-h-[2.5rem] overflow-hidden",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-1"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),(0,a.jsxs)("div",{className:"mb-4 min-h-[2.8rem]",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-1"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]}),(0,a.jsx)("div",{className:"mb-4 text-center min-h-[1.5rem]",children:(0,a.jsx)("div",{className:"inline-block h-4 bg-gray-200 rounded w-32"})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("div",{className:"h-10 bg-gray-200 rounded-full w-full"})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-gray-200 rounded flex-shrink-0"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full"})})]})}),(0,a.jsx)("div",{className:"mt-auto pt-3 border-t border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-16"}),(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-20"})]})})]})]}),m=e=>{let{restaurants:s,currentPage:t=1,totalPages:r=1,onPageChange:n,totalRestaurants:o=0,userLocation:i,loading:m=!1}=e,x=(0,l.useRouter)(),h=e=>{x.push("/restaurant/".concat(e.id))},u=e=>{n&&n(e)};return 0===s.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-500 mb-4",children:(0,a.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No restaurants found"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search criteria"})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4 sm:gap-6",children:m?Array.from({length:20}).map((e,s)=>(0,a.jsx)(d,{},"skeleton-".concat(s))):s.map((e,s)=>(0,a.jsx)(c.Z,{restaurant:e,onClick:()=>h(e),userLocation:i,index:s},e.id))}),r>1&&(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4 pt-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 text-center",children:["Page ",t," of ",r," â€¢ ",o," restaurants total"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>u(t-1),disabled:t<=1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors min-w-[44px]",children:"Prev"}),(0,a.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,r)},(e,s)=>{let n;return n=r<=5?s+1:t<=3?s+1:t>=r-2?r-4+s:t-2+s,(0,a.jsx)("button",{onClick:()=>u(n),className:"px-3 py-2 text-sm font-medium rounded-md transition-colors min-w-[44px] ".concat(t===n?"bg-mint-green text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),children:n},n)})}),(0,a.jsx)("button",{onClick:()=>u(t+1),disabled:t>=r,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors min-w-[44px]",children:"Next"})]})]})]})},x=t(8440),h=t(5438);function u(e){let{onComplete:s,duration:t=2e3}=e,[n,o]=(0,r.useState)(!0),[i,l]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{let e=setTimeout(()=>{l(!0),setTimeout(()=>{o(!1),null==s||s()},500)},t);return()=>clearTimeout(e)},[t,s]),n)?(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-white flex items-center justify-center transition-opacity duration-500 ".concat(i?"opacity-0":"opacity-100"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,a.jsx)("div",{className:"transform transition-all duration-700 ".concat(i?"scale-75 opacity-0":"scale-100 opacity-100"),children:(0,a.jsx)(h.Z,{size:"xl",className:"w-24 h-24"})}),(0,a.jsxs)("div",{className:"transition-all duration-700 delay-300 ".concat(i?"opacity-0 translate-y-4":"opacity-100 translate-y-0"),children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-mint-green tracking-wide",style:{fontFamily:'"Comic Sans MS", "Chalkboard SE", "Marker Felt", "Arial Rounded MT Bold", "Helvetica Rounded", sans-serif',fontWeight:"700",letterSpacing:"0.025em",fontStyle:"normal",textShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:"Jewgo"}),(0,a.jsx)("p",{className:"text-gray-500 text-center mt-2",children:"Find Your Kosher Eatery"})]}),(0,a.jsxs)("div",{className:"flex space-x-2 transition-opacity duration-700 delay-500 ".concat(i?"opacity-0":"opacity-100"),children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-mint-green rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-mint-green rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-mint-green rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})}):null}var g=t(2280);function j(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0),[h,j]=(0,r.useState)(!1),[p,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(""),[f,N]=(0,r.useState)(1),[k]=(0,r.useState)(20),[w,L]=(0,r.useState)(null),[S,M]=(0,r.useState)(!1),[C,W]=(0,r.useState)(!1),[E,F]=(0,r.useState)({}),[P,T]=(0,r.useState)("eatery");(0,r.useEffect)(()=>{console.log("useEffect called - fetching restaurants"),H()},[]);let A=()=>{if(!navigator.geolocation){console.log("Geolocation is not supported by this browser");return}if(w){console.log("Location already available:",w);return}M(!0),navigator.geolocation.getCurrentPosition(e=>{let s={latitude:e.coords.latitude,longitude:e.coords.longitude};console.log("User location obtained:",s),L(s),M(!1)},e=>{console.log("Error getting location:",e),1===e.code?console.log("Geolocation permission denied or blocked by policy"):2===e.code?console.log("Geolocation position unavailable"):3===e.code&&console.log("Geolocation request timed out"),M(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},Z=()=>{console.log("User requested location access"),A()},H=async()=>{try{var e;console.log("Fetching restaurants...");let t=await fetch("".concat("https://jewgo.onrender.com","/api/restaurants?limit=1000"));if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let a=await t.json();console.log("Restaurants fetched:",(null===(e=a.data)||void 0===e?void 0:e.length)||0),a.data?(s(a.data),l(a.data.slice(0,k))):y("No restaurants data received")}catch(e){console.error("Error fetching restaurants:",e),y("Failed to fetch restaurants")}finally{d(!1),j(!1)}},R=e.length;return h?(0,a.jsx)(u,{}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:(0,a.jsxs)("div",{className:"flex-1 pb-20 sm:pb-24",children:[(0,a.jsx)(n.Z,{}),(0,a.jsxs)("div",{className:"sticky top-0 z-40 bg-white/95 backdrop-blur-sm border-b border-gray-100",children:[(0,a.jsx)("div",{className:"px-4 py-3 sm:px-6",children:(0,a.jsx)(o.Z,{onSearch:e=>{console.log("=== handleSearch called - setting currentPage to 1 ==="),b(e),N(1)}})}),(0,a.jsx)("div",{className:"px-4 sm:px-6",children:(0,a.jsx)(g.Z,{activeTab:P,onTabChange:e=>{if("specials"===e){window.location.href="/specials";return}T(e),N(1),b("")}})})]}),"eatery"===P&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"px-4 py-4 sm:px-6 sm:py-6 space-y-4",children:(0,a.jsx)(i.Z,{isOnMapPage:!1,onShowFilters:()=>{},onShowMap:()=>window.location.href="/live-map",onAddEatery:()=>window.location.href="/add-eatery",onFilterChange:(e,s)=>{F(t=>({...t,[e]:s})),N(1),"nearMe"===e&&!0===s&&Z()},onToggleFilter:(e,s)=>{F(t=>({...t,[e]:s})),N(1)},onDistanceChange:e=>{F(s=>({...s,distanceRadius:e})),N(1)},onClearAll:()=>{F({}),b(""),N(1)},activeFilters:E,userLocation:w?{lat:w.latitude,lng:w.longitude}:null,locationLoading:S,hasActiveFilters:Object.values(E||{}).some(e=>void 0!==e&&!1!==e)})}),(0,a.jsx)("div",{className:"px-4 sm:px-6 pb-4",children:c?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)("div",{className:"text-gray-500",children:"Loading restaurants..."})}):p?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)("div",{className:"text-red-500",children:p})}):(0,a.jsx)(m,{restaurants:t,currentPage:f,totalPages:Math.ceil(R/k),onPageChange:e=>{N(e)},totalRestaurants:R,userLocation:w,loading:c})})]}),"mikvahs"===P&&(0,a.jsx)("div",{className:"px-4 sm:px-6 pb-32",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,a.jsx)("div",{className:"text-gray-500 mb-4",children:(0,a.jsxs)("svg",{className:"h-16 w-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 18h16"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M6 19h2"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M10 19h2"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M14 19h2"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M18 19h2"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 6v12"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 6v12"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 8h8"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h8"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16h8"})]})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Mikvahs Coming Soon"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Mikvah locations and information will be available here soon."})]})}),"shuls"===P&&(0,a.jsx)("div",{className:"px-4 sm:px-6 pb-32",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,a.jsx)("div",{className:"text-gray-500 mb-4",children:(0,a.jsx)("svg",{className:"h-16 w-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Shuls Coming Soon"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Synagogue locations and information will be available here soon."})]})}),"stores"===P&&(0,a.jsx)("div",{className:"px-4 sm:px-6 pb-32",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,a.jsx)("div",{className:"text-gray-500 mb-4",children:(0,a.jsx)("svg",{className:"h-16 w-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Stores Coming Soon"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Kosher grocery stores and markets will be available here soon."})]})}),(0,a.jsx)(x.Z,{})]})})}}},function(e){e.O(0,[216,823,261,933,765,744],function(){return e(e.s=3848)}),_N_E=e.O()}]);