(()=>{var e={};e.id=773,e.ids=[773],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},34455:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),a(23245),a(418),a(35866);var s=a(23191),r=a(88716),l=a(37922),n=a.n(l),i=a(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let d=["",{children:["live-map",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,23245)),"/Users/mendell/jewgo app/app/live-map/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,418)),"/Users/mendell/jewgo app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/mendell/jewgo app/app/live-map/page.tsx"],u="/live-map/page",x={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/live-map/page",pathname:"/live-map",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4736:(e,t,a)=>{Promise.resolve().then(a.bind(a,10450))},10450:(e,t,a)=>{"use strict";a.d(t,{default:()=>x});var s=a(10326),r=a(17577),l=a(35047),n=a(96968),i=a(3626),o=a(70540);function d({restaurants:e,onRestaurantSelect:t,selectedRestaurantId:a,userLocation:l,mapCenter:n,className:i="h-96"}){let[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),[x,m]=(0,r.useState)(null),g=(0,r.useRef)(null),h=(0,r.useRef)(null);(0,r.useRef)([]),(0,r.useRef)(null),(0,r.useRef)(null);let[p,b]=(0,r.useState)(!1),v=e.filter(e=>{if(!e.latitude||!e.longitude)return!1;let t=parseFloat(e.latitude.toString()),a=parseFloat(e.longitude.toString());return!(isNaN(t)||isNaN(a))&&(0!==t||0!==a)&&!(t<-90)&&!(t>90)&&!(a<-180)&&!(a>180)});return(console.log("InteractiveRestaurantMap Debug:",{totalRestaurants:e.length,restaurantsWithCoords:v.length,userLocation:!!l,mapCenter:!!n}),p||c)?c?s.jsx("div",{className:`bg-gray-100 rounded-lg flex items-center justify-center ${i}`,children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-500 text-4xl mb-4",children:"⚠️"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Map Error"}),s.jsx("p",{className:"text-gray-600 mb-4",children:c})]})}):0===v.length?s.jsx("div",{className:`bg-gray-100 rounded-lg flex items-center justify-center ${i}`,children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDDFA️"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Location Data"}),s.jsx("p",{className:"text-gray-600",children:"No restaurants with location data available"})]})}):(0,s.jsxs)("div",{className:`relative bg-white rounded-lg shadow-lg overflow-hidden ${i}`,children:[s.jsx("div",{ref:g,className:"w-full h-full"}),s.jsx("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-lg px-3 py-2 shadow-lg",children:(0,s.jsxs)("div",{className:"text-xs font-medium text-gray-700",children:[v.length," restaurants",l&&s.jsx("span",{className:"text-blue-600 ml-2",children:"\uD83D\uDCCD Your location"})]})}),(0,s.jsxs)("div",{className:"absolute top-4 left-4 bg-white/95 backdrop-blur-sm rounded-lg px-3 py-2 shadow-lg",children:[s.jsx("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"Kosher Types:"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Meat"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Dairy"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Pareve"})]})]})]}),l&&s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx("button",{onClick:()=>{h.current&&l&&(h.current.panTo(new window.google.maps.LatLng(l.latitude,l.longitude)),h.current.setZoom(10))},className:"bg-white/95 backdrop-blur-sm rounded-lg p-2 shadow-lg hover:bg-white transition-colors",title:"Center on your location",children:s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})})})})]}):s.jsx("div",{className:`bg-gray-100 rounded-lg flex items-center justify-center ${i}`,children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-jewgo-primary mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading interactive map..."})]})})}var c=a(86871),u=a(86255);function x(){(0,l.useSearchParams)();let[e,t]=(0,r.useState)([]),[a,x]=(0,r.useState)([]),[m,g]=(0,r.useState)(!0),[h,p]=(0,r.useState)(null),[b,v]=(0,r.useState)(""),[y,j]=(0,r.useState)(null),[f,N]=(0,r.useState)(null),[w,S]=(0,r.useState)(!1),[P,C]=(0,r.useState)(null),[A,L]=(0,r.useState)({}),[$,_]=(0,r.useState)(null),[R,k]=(0,r.useState)("eatery");(0,r.useCallback)(async()=>{try{g(!0),p(null);let e="https://jewgo.onrender.com/api/restaurants";if(f){let a=b.trim()?`${e}?limit=1000`:`${e}?limit=200&lat=${f.latitude}&lng=${f.longitude}&radius=50`;console.log("Live map fetching from:",a);let s=await fetch(a);if(!s.ok)throw Error(`HTTP error! status: ${s.status}`);let r=await s.json();if(r.data&&Array.isArray(r.data))t(r.data);else if(r.restaurants&&Array.isArray(r.restaurants))t(r.restaurants);else throw Error("Invalid response format")}else{let a=await fetch(`${e}?limit=1000`);if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);let s=await a.json();if(s.data&&Array.isArray(s.data))t(s.data);else if(s.restaurants&&Array.isArray(s.restaurants))t(s.restaurants);else throw Error("Invalid response format")}}catch(e){console.error("Error fetching restaurants:",e),p(e instanceof Error?e.message:"Failed to fetch restaurants")}finally{g(!1)}},[f,b]);let E=e=>{switch(e){case 1:return"Location access denied. Please enable location services.";case 2:return"Location unavailable. Please try again.";case 3:return"Location request timed out. Please try again.";default:return"Unable to get your location. Please try again."}},D=()=>{v(""),L({})},M=()=>!!b.trim()||Object.values(A).some(e=>void 0!==e&&!1!==e&&""!==e);return m?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"text-gray-500",children:"Loading restaurants..."})}):h?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-red-500",children:["Error: ",h]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(n.Z,{}),s.jsx("div",{className:"px-4 py-2 bg-white border-b border-gray-100",children:s.jsx(i.Z,{onSearch:e=>{v(e)},placeholder:"Search restaurants..."})}),s.jsx("div",{className:"px-4 py-2 bg-white border-b border-gray-100",children:s.jsx(o.Z,{onShowFilters:()=>{},onShowMap:()=>{},onAddEatery:()=>{},onFilterChange:(e,t)=>{L(a=>({...a,[e]:t}))},onToggleFilter:(e,t)=>{L(a=>({...a,[e]:t}))},onDistanceChange:e=>{L(t=>({...t,distanceRadius:e}))},onClearAll:D,activeFilters:A,userLocation:f?{lat:f.latitude,lng:f.longitude}:null,locationLoading:w,hasActiveFilters:M(),isOnMapPage:!0})}),s.jsx("div",{className:"px-4 py-2 bg-white border-b border-gray-100",children:s.jsx(u.Z,{activeTab:R,onTabChange:e=>{k(e)}})}),w&&s.jsx("div",{className:"px-4 py-2 bg-blue-50 text-blue-700 text-sm",children:"Getting your location..."}),P&&(0,s.jsxs)("div",{className:"px-4 py-2 bg-yellow-50 text-yellow-700 text-sm",children:[P,s.jsx("button",{onClick:()=>{if(!navigator.geolocation){C("Geolocation is not supported by this browser.");return}S(!0),C(null),navigator.geolocation.getCurrentPosition(e=>{N({latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy}),S(!1)},e=>{C(E(e.code)),S(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},className:"ml-2 underline hover:no-underline",children:"Try again"})]}),M()&&(0,s.jsxs)("div",{className:"px-4 py-2 bg-gray-50 text-sm text-gray-600 border-b border-gray-200",children:[(()=>{let e=[];return b.trim()&&e.push(`"${b}"`),A.agency&&e.push(`${A.agency} certified`),A.dietary&&e.push(`${A.dietary} only`),A.category&&e.push(`${A.category} cuisine`),A.nearMe&&e.push(`within ${A.distanceRadius||10} miles`),A.openNow&&e.push("open now"),e.length>0?e.join(", "):"All restaurants"})()," • ",a.length," restaurants",s.jsx("button",{onClick:D,className:"ml-2 text-blue-600 hover:text-blue-800 underline",children:"Clear all"})]}),s.jsx("div",{className:"flex-1 relative",children:s.jsx(d,{restaurants:a,userLocation:f,selectedRestaurantId:y?.id,onRestaurantSelect:t=>{j(e.find(e=>e.id===t)||null)},mapCenter:$})}),s.jsx(c.Z,{})]})}},23245:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(19510),r=a(71159);let l=(0,a(68570).createProxy)(String.raw`/Users/mendell/jewgo app/components/LiveMapClient.tsx#default`);function n(){return s.jsx(r.Suspense,{fallback:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"text-gray-500",children:"Loading map..."})}),children:s.jsx(l,{})})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[276,114,377,262,669,802],()=>a(34455));module.exports=s})();