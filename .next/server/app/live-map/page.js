(()=>{var e={};e.id=773,e.ids=[773],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},20227:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>g,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=a(50482),s=a(69108),n=a(62563),o=a.n(n),l=a(68300),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);a.d(t,i);let c=["",{children:["live-map",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,23069)),"/Users/mendell/jewgo app/app/live-map/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,30766)),"/Users/mendell/jewgo app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/mendell/jewgo app/app/live-map/page.tsx"],u="/live-map/page",g={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/live-map/page",pathname:"/live-map",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},47558:(e,t,a)=>{Promise.resolve().then(a.bind(a,80963))},80963:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var r=a(95344),s=a(3729),n=a(22254),o=a(57816),l=a(43652),i=a(30858);function c({restaurants:e,onRestaurantSelect:t,selectedRestaurantId:a,userLocation:n,mapCenter:o,className:l="h-96"}){let[i,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(null),[g,p]=(0,s.useState)(null),m=(0,s.useRef)(null),x=(0,s.useRef)(null),h=(0,s.useRef)([]),w=(0,s.useRef)(null),f=(0,s.useRef)(null),[y,v]=(0,s.useState)(!1),b=e.filter(e=>{if(!e.latitude||!e.longitude)return!1;let t=parseFloat(e.latitude.toString()),a=parseFloat(e.longitude.toString());return!(isNaN(t)||isNaN(a))&&(0!==t||0!==a)&&!(t<-90)&&!(t>90)&&!(a<-180)&&!(a>180)});console.log("InteractiveRestaurantMap Debug:",{totalRestaurants:e.length,restaurantsWithCoords:b.length,userLocation:!!n,mapCenter:!!o}),(0,s.useEffect)(()=>{(()=>{if(window.google&&window.google.maps&&window.google.maps.LatLngBounds){v(!0);return}if(document.querySelector('script[src*="maps.googleapis.com"]')){let e=setInterval(()=>{window.google&&window.google.maps&&window.google.maps.LatLngBounds&&(v(!0),clearInterval(e))},100);setTimeout(()=>{clearInterval(e),window.google&&window.google.maps||u("Google Maps API failed to load")},1e4);return}let e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA12xiUBIe9EJmuP8pEmWgj_Fsv0FkUiqA&libraries=places,geometry&loading=async",e.async=!0,e.defer=!0,e.onload=()=>{let e=setInterval(()=>{window.google&&window.google.maps&&window.google.maps.LatLngBounds&&(v(!0),clearInterval(e))},100);setTimeout(()=>{clearInterval(e),window.google&&window.google.maps||u("Google Maps API failed to initialize")},1e4)},e.onerror=()=>{u("Failed to load Google Maps API")},document.head.appendChild(e)})()},[]),(0,s.useEffect)(()=>{if(y&&m.current&&!d)try{if(!window.google||!window.google.maps||!window.google.maps.LatLngBounds){console.error("Google Maps API not fully loaded"),u("Google Maps API not fully loaded");return}if(!x.current){let e=new window.google.maps.LatLngBounds,t={lat:25.7617,lng:-80.1918};n&&(t={lat:n.latitude,lng:n.longitude},e.extend(new window.google.maps.LatLng(n.latitude,n.longitude))),b.length>0&&b.forEach(t=>{void 0!==t.latitude&&void 0!==t.longitude&&e.extend(new window.google.maps.LatLng(t.latitude,t.longitude))});let a=new window.google.maps.Map(m.current,{center:t,zoom:n?14:10,mapTypeId:window.google.maps.MapTypeId.ROADMAP,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"simplified"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"simplified"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#e3f2fd"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e8f5e8"}]}],zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0,gestureHandling:"cooperative"});x.current=a,f.current=new window.google.maps.InfoWindow({disableAutoPan:!1,maxWidth:300}),o?(a.setCenter(o),a.setZoom(16)):n?(a.setCenter({lat:n.latitude,lng:n.longitude}),a.setZoom(14)):b.length>0&&a.fitBounds(e),c(!0)}}catch(e){console.error("Error initializing map:",e),u("Failed to initialize map")}},[y,d,n,o]),(0,s.useEffect)(()=>{if(x.current&&i&&n)try{let e=x.current;w.current&&w.current.setMap(null);let t=new window.google.maps.LatLng(n.latitude,n.longitude),a={url:`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(`
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="16" cy="16" r="8" fill="#4285F4" stroke="white" stroke-width="3"/>
            <circle cx="16" cy="16" r="4" fill="white"/>
            <circle cx="16" cy="16" r="12" fill="#4285F4" opacity="0.3"/>
          </svg>
        `)}`,scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(16,16)};w.current=new window.google.maps.Marker({position:t,map:e,icon:a,title:"Your Location",zIndex:1e3}),w.current.addListener("click",()=>{if(e.panTo(t),e.setZoom(10),f.current){let t=`
            <div class="p-3 max-w-xs">
              <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                <h3 class="font-semibold text-gray-900 text-sm">Your Location</h3>
              </div>
              <p class="text-gray-600 text-xs mt-1">
                ${n.latitude.toFixed(6)}, ${n.longitude.toFixed(6)}
              </p>
              ${n.accuracy?`
                <p class="text-gray-500 text-xs mt-1">
                  Accuracy: \xb1${Math.round(n.accuracy)} meters
                </p>
              `:""}
            </div>
          `;f.current.setContent(t),f.current.open(e,w.current)}})}catch(e){console.error("Error updating user location marker:",e)}},[n,i]),(0,s.useEffect)(()=>{if(x.current&&i&&n)try{let e=x.current;console.log("Updating map center to user location:",n),e.panTo({lat:n.latitude,lng:n.longitude}),e.setZoom(14)}catch(e){console.error("Error updating map center:",e)}},[n,i]),(0,s.useEffect)(()=>{if(console.log("mapCenter prop changed:",o),console.log("mapLoaded:",i),console.log("mapInstanceRef.current:",!!x.current),!x.current||!i||!o){console.log("Skipping map center update - conditions not met");return}try{let e=x.current;console.log("Updating map center from URL parameters:",o),e.panTo(o),e.setZoom(16),console.log("Map center updated successfully")}catch(e){console.error("Error updating map center from URL parameters:",e)}},[o,i]),(0,s.useEffect)(()=>{if(x.current&&i&&0!==b.length)try{let e=x.current;h.current.forEach(e=>e.setMap(null)),h.current=[],b.forEach(r=>{let s;if(void 0===r.latitude||void 0===r.longitude)return;let o=new window.google.maps.LatLng(r.latitude,r.longitude),l=a===r.id,i=null;if(n){let e=(r.latitude-n.latitude)*Math.PI/180,t=(r.longitude-n.longitude)*Math.PI/180,a=Math.sin(e/2)*Math.sin(e/2)+Math.cos(n.latitude*Math.PI/180)*Math.cos(r.latitude*Math.PI/180)*Math.sin(t/2)*Math.sin(t/2);i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*3959}let c=(e=>{switch(e?.toLowerCase()){case"meat":return"#dc2626";case"dairy":return"#2563eb";case"pareve":return"#059669";default:return"#4b5563"}})(r.kosher_category),d=l?"#FFD700":c;if(window.google.maps.marker&&window.google.maps.marker.AdvancedMarkerElement)try{let t=new window.google.maps.marker.PinElement({background:d,borderColor:"#000000",glyphColor:"#FFFFFF",scale:1.5});s=new window.google.maps.marker.AdvancedMarkerElement({position:o,map:e,content:t.element,title:r.name})}catch(a){console.warn("AdvancedMarkerElement failed, falling back to regular Marker:",a);let t={url:`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(`
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" 
                        fill="${d}" 
                        stroke="#000000" 
                        stroke-width="1.5"/>
                  <circle cx="12" cy="9" r="2.5" fill="white"/>
                  <circle cx="12" cy="9" r="1.5" fill="${d}"/>
                </svg>
              `)}`,scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(12,24)};s=new window.google.maps.Marker({position:o,map:e,icon:t,title:r.name})}else{let t={url:`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(`
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" 
                      fill="${d}" 
                      stroke="#000000" 
                      stroke-width="1.5"/>
                <circle cx="12" cy="9" r="2.5" fill="white"/>
                <circle cx="12" cy="9" r="1.5" fill="${d}"/>
              </svg>
            `)}`,scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(12,24)};s=new window.google.maps.Marker({position:o,map:e,icon:t,title:r.name})}s.addListener("click",()=>{if(console.log("Marker clicked:",r.name),p(r),t?.(r.id),f.current){let t=N(r,i);f.current.setContent(t),f.current.open(e,s)}}),h.current.push(s)})}catch(e){console.error("Error updating markers:",e)}},[b,a,i,n]);let j=e=>{if(e.image_url?.includes("maps.googleapis.com/maps/api/place/photo")){let t="AIzaSyA12xiUBIe9EJmuP8pEmWgj_Fsv0FkUiqA";if(t)try{let a=new URL(e.image_url),r=a.searchParams.get("photo_reference"),s=a.searchParams.get("maxwidth")||"400";if(r)return`https://maps.googleapis.com/maps/api/place/photo?maxwidth=${s}&photo_reference=${r}&key=${t}`}catch(e){console.error("Error parsing Google Places URL:",e)}return null}return e.image_url},N=(e,t)=>{let a=j(e);return`
      <div class="p-3 max-w-xs relative">
        <button onclick="this.parentElement.parentElement.parentElement.close()" 
                class="absolute top-2 right-2 text-gray-400 hover:text-gray-600 text-lg font-bold leading-none">
          \xd7
        </button>
        <div class="flex items-start space-x-3">
          ${a?`
            <img src="${a}" alt="${e.name}" 
                 class="w-16 h-12 object-cover rounded-lg flex-shrink-0"
                 loading="lazy" />
          `:`
            <div class="w-16 h-12 bg-gray-200 rounded-lg flex-shrink-0 flex items-center justify-center">
              <span class="text-gray-400 text-xs">No Image</span>
            </div>
          `}
          <div class="flex-1 min-w-0">
            <h3 class="font-semibold text-gray-900 text-sm leading-tight mb-1">${e.name}</h3>
            <p class="text-gray-600 text-xs mb-1">${e.address}</p>
            ${null!=t?`
              <p class="text-blue-600 text-xs font-medium mb-1">📍 ${t.toFixed(1)} miles away</p>
            `:""}
            ${e.certifying_agency?`
              <span class="inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full mb-1">
                ${e.certifying_agency}
              </span>
            `:""}
            ${e.kosher_category?`
              <span class="inline-block ${"meat"===e.kosher_category?"bg-red-100 text-red-800":"dairy"===e.kosher_category?"bg-blue-100 text-blue-800":"pareve"===e.kosher_category?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"} text-xs px-2 py-1 rounded-full mb-1">
                ${e.kosher_category}
              </span>
            `:""}
            ${e.avg_price?`
              <p class="text-green-600 text-xs font-medium">${e.avg_price}</p>
            `:""}
          </div>
        </div>
        <div class="mt-3 pt-2 border-t border-gray-200">
          <a href="/restaurant/${e.id}" 
             class="text-blue-600 hover:text-blue-800 text-xs font-medium">
            View Details →
          </a>
        </div>
      </div>
    `};return y||d?d?r.jsx("div",{className:`bg-gray-100 rounded-lg flex items-center justify-center ${l}`,children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-500 text-4xl mb-4",children:"⚠️"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Map Error"}),r.jsx("p",{className:"text-gray-600 mb-4",children:d})]})}):0===b.length?r.jsx("div",{className:`bg-gray-100 rounded-lg flex items-center justify-center ${l}`,children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDDFA️"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Location Data"}),r.jsx("p",{className:"text-gray-600",children:"No restaurants with location data available"})]})}):(0,r.jsxs)("div",{className:`relative bg-white rounded-lg shadow-lg overflow-hidden ${l}`,children:[r.jsx("div",{ref:m,className:"w-full h-full"}),r.jsx("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-lg px-3 py-2 shadow-lg",children:(0,r.jsxs)("div",{className:"text-xs font-medium text-gray-700",children:[b.length," restaurants",n&&r.jsx("span",{className:"text-blue-600 ml-2",children:"\uD83D\uDCCD Your location"})]})}),(0,r.jsxs)("div",{className:"absolute top-4 left-4 bg-white/95 backdrop-blur-sm rounded-lg px-3 py-2 shadow-lg",children:[r.jsx("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"Kosher Types:"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),r.jsx("span",{className:"text-xs text-gray-600",children:"Meat"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),r.jsx("span",{className:"text-xs text-gray-600",children:"Dairy"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),r.jsx("span",{className:"text-xs text-gray-600",children:"Pareve"})]})]})]}),n&&r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx("button",{onClick:()=>{x.current&&n&&(x.current.panTo(new window.google.maps.LatLng(n.latitude,n.longitude)),x.current.setZoom(10))},className:"bg-white/95 backdrop-blur-sm rounded-lg p-2 shadow-lg hover:bg-white transition-colors",title:"Center on your location",children:r.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})})})})]}):r.jsx("div",{className:`bg-gray-100 rounded-lg flex items-center justify-center ${l}`,children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-jewgo-primary mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading interactive map..."})]})})}var d=a(24330),u=a(59808);function g(){let e=(0,n.useSearchParams)(),[t,a]=(0,s.useState)([]),[g,p]=(0,s.useState)([]),[m,x]=(0,s.useState)(!0),[h,w]=(0,s.useState)(null),[f,y]=(0,s.useState)(""),[v,b]=(0,s.useState)(null),[j,N]=(0,s.useState)(null),[L,M]=(0,s.useState)(!1),[k,C]=(0,s.useState)(null),[P,_]=(0,s.useState)({}),[E,S]=(0,s.useState)(null),[F,$]=(0,s.useState)("eatery");(0,s.useEffect)(()=>{let t=e.get("lat"),a=e.get("lng"),r=e.get("name");if(t&&a){let e=parseFloat(t),s=parseFloat(a);!isNaN(e)&&!isNaN(s)&&e>=-90&&e<=90&&s>=-180&&s<=180?(S({lat:e,lng:s}),r&&y(decodeURIComponent(r))):console.warn("Invalid coordinates in URL parameters:",{lat:t,lng:a,latitude:e,longitude:s})}},[e]),(0,s.useEffect)(()=>{I()},[]),(0,s.useEffect)(()=>{R()},[]),(0,s.useEffect)(()=>{j&&I()},[j]),(0,s.useEffect)(()=>{console.log("Live map useEffect triggered - updateDisplayedRestaurants"),console.log("Live map allRestaurants count:",t.length),T()},[t,f,P,j]);let I=(0,s.useCallback)(async()=>{try{x(!0),w(null);let e="https://jewgo.onrender.com/api/restaurants";if(j){let t=f.trim()?`${e}?limit=1000`:`${e}?limit=200&lat=${j.latitude}&lng=${j.longitude}&radius=50`;console.log("Live map fetching from:",t);let r=await fetch(t);if(!r.ok)throw Error("Failed to fetch restaurants");let s=await r.json();if(s.success&&s.data)console.log("Live map API returned restaurants:",s.data.length),console.log("Live map setting allRestaurants:",s.data.length),a(s.data);else throw Error(s.error||"Failed to fetch restaurants")}else{let t=await fetch(`${e}?limit=1000`);if(!t.ok)throw Error("Failed to fetch restaurants");let r=await t.json();if(r.success&&r.data)console.log("Live map API returned restaurants:",r.data.length),console.log("Live map setting allRestaurants:",r.data.length),a(r.data);else throw Error(r.error||"Failed to fetch restaurants")}}catch(e){console.error("Error fetching restaurants:",e)}finally{x(!1)}},[j,f]),R=()=>{if(!navigator.geolocation){C("Geolocation is not supported by this browser");return}M(!0),C(null),navigator.geolocation.getCurrentPosition(e=>{N({latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy}),M(!1)},e=>{C(D(e.code)),M(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},D=e=>{switch(e){case 1:return"Location access denied. Please enable location services.";case 2:return"Location unavailable. Please try again.";case 3:return"Location request timed out. Please try again.";default:return"Unable to get your location. Please try again."}},A=(e,t,a,r)=>{let s=(a-e)*Math.PI/180,n=(r-t)*Math.PI/180,o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*3959},T=()=>{console.log("Live map updateDisplayedRestaurants called with:",{allRestaurantsCount:t.length,searchQuery:f,activeFilters:P});let e=[...t];if(f.trim()){let a=f.toLowerCase();console.log("Live map search query:",a),console.log("Live map first few restaurant names:",t.slice(0,3).map(e=>e.name)),e=e.filter(e=>{let t=[e.name,e.address,e.city,e.state,e.certifying_agency,e.kosher_category,e.listing_type,e.phone_number,e.avg_price].filter(Boolean).map(e=>e?.toLowerCase()).some(e=>e?.includes(a));return(e.name.toLowerCase().includes("17")||e.name.toLowerCase().includes("restaurant"))&&console.log("Live map checking restaurant:",e.name,"matches:",t),t})}if(P.agency&&"all"!==P.agency&&(e=e.filter(e=>"Diamond K"===P.agency?"Diamond K"===e.certifying_agency:e.certifying_agency?.toUpperCase()===P.agency?.toUpperCase())),P.dietary&&(e=e.filter(e=>{let t=e.kosher_category?.toLowerCase()||"";return"meat"===P.dietary?"meat"===t:"dairy"===P.dietary?"dairy"===t:"pareve"===P.dietary&&"pareve"===t})),P.category&&"all"!==P.category&&(e=e.filter(e=>(e.listing_type?.toLowerCase()||"")===P.category?.toLowerCase())),P.distanceRadius&&j&&(e=e.filter(e=>A(j.latitude,j.longitude,parseFloat(String(e.latitude)||"0"),parseFloat(String(e.longitude)||"0"))<=P.distanceRadius)),P.openNow){let t=new Date;t.getDay(),t.getHours(),t.getMinutes(),e=e.filter(e=>e.hours_of_operation&&""!==e.hours_of_operation.trim())}j&&e.sort((e,t)=>A(j.latitude,j.longitude,parseFloat(String(e.latitude)||"0"),parseFloat(String(e.longitude)||"0"))-A(j.latitude,j.longitude,parseFloat(String(t.latitude)||"0"),parseFloat(String(t.longitude)||"0"))),console.log("Live map setting displayedRestaurants:",e.length),p(e)},U=()=>{let e=[];return P.agency&&e.push(P.agency),P.dietary&&e.push(P.dietary),P.category&&e.push(P.category),P.openNow&&e.push("Open Now"),P.distanceRadius&&e.push(`${P.distanceRadius} miles`),f.trim()&&e.push(`"${f}"`),e.join(" + ")},q=g.length;return(0,r.jsxs)("div",{className:"min-h-screen bg-white",children:[r.jsx(o.Z,{}),r.jsx("div",{className:"px-4 py-4",children:r.jsx(l.Z,{onSearch:e=>{y(e)}})}),r.jsx(u.Z,{activeTab:F,onTabChange:e=>{$(e),y("")}}),(0,r.jsxs)("div",{className:"px-4 mb-3",children:[L&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-blue-600 bg-blue-50 px-3 py-2 rounded-lg",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),r.jsx("span",{children:"Getting your location..."})]}),k&&(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-red-600 bg-red-50 px-3 py-2 rounded-lg",children:[r.jsx("span",{children:k}),r.jsx("button",{onClick:R,className:"text-red-800 hover:text-red-900 font-medium",children:"Retry"})]}),j&&(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-green-600 bg-green-50 px-3 py-2 rounded-lg",children:[r.jsx("span",{children:"\uD83D\uDCCD Location found! Showing nearby restaurants"}),r.jsx("button",{onClick:R,className:"text-green-800 hover:text-green-900 font-medium text-xs",children:"Refresh"})]}),!j&&!L&&!k&&(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 bg-gray-50 px-3 py-2 rounded-lg",children:[r.jsx("span",{children:"\uD83D\uDCCD Enable location to see nearby restaurants"}),r.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-700 font-medium text-xs",children:"Get Location"})]})]}),r.jsx(i.Z,{onShowFilters:()=>{},onShowMap:()=>{window.location.href="/"},onAddEatery:()=>{window.location.href="/add-eatery"},activeFilters:P,onFilterChange:(e,t)=>{_(a=>({...a,[e]:"all"===t?void 0:t}))},onToggleFilter:(e,t)=>{_(a=>({...a,[e]:t}))},onDistanceChange:e=>{_(t=>({...t,distanceRadius:e}))},onClearAll:()=>{_({}),y("")},userLocation:j?{lat:j.latitude,lng:j.longitude}:null,locationLoading:L,hasActiveFilters:!!(P.agency||P.dietary||P.category||P.openNow||P.distanceRadius||f.trim()),isOnMapPage:!0}),!m&&r.jsx("div",{className:"px-4 mb-4",children:(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[U()?(0,r.jsxs)("span",{children:["Found ",q," restaurant",1!==q?"s":""," matching ",U()]}):(0,r.jsxs)("span",{children:["Showing ",g.length," of ",t.length," restaurants"]}),f.trim()&&(0,r.jsxs)("div",{className:"mt-1 text-xs text-jewgo-primary",children:['\uD83D\uDD0D Search active: "',f,'"']})]})}),r.jsx("div",{className:"px-4 pb-20",children:m?(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-jewgo-primary mb-4"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Loading restaurants..."}),j&&r.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"Searching within 50 miles of your location"})]}):r.jsx(c,{restaurants:g,onRestaurantSelect:e=>{b(t.find(t=>t.id===e)||null)},selectedRestaurantId:v?.id,userLocation:j,mapCenter:E,className:"h-[calc(100vh-400px)]"})}),r.jsx(d.Z,{})]})}},23069:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>s,default:()=>o});let r=(0,a(86843).createProxy)(String.raw`/Users/mendell/jewgo app/app/live-map/page.tsx`),{__esModule:s,$$typeof:n}=r,o=r.default}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[225,295,587,220,613,858],()=>a(20227));module.exports=r})();