(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[435],{5435:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var s=n(7437),r=n(2265),o=n(2284),i=n(8809);function l(e){let{onSearch:t,placeholder:n="Search restaurants, agencies, or dietary preferences..."}=e,[l,a]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[g,m]=(0,r.useState)([]),[p,f]=(0,r.useState)(!1),[x,v]=(0,r.useState)(null),[w,y]=(0,r.useState)(null),[b,P]=(0,r.useState)(0),j=(0,r.useRef)(),D=(0,r.useRef)(),k=(0,r.useRef)(null),N=(0,r.useRef)(null);(0,r.useRef)(null),(0,r.useEffect)(()=>{(async()=>{try{await o.Ll.initialize(),v(null)}catch(e){console.error("Error initializing Google Places:",e),v("Failed to initialize Places API")}})()},[]),(0,r.useEffect)(()=>(j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{t(l)},300),()=>{j.current&&clearTimeout(j.current)}),[l]),(0,r.useEffect)(()=>(D.current&&clearTimeout(D.current),l.length>2&&N.current&&!x?(f(!0),m([]),D.current=setTimeout(()=>{C(l)},500)):(m([]),f(!1)),()=>{D.current&&clearTimeout(D.current)}),[l,x]);let C=async e=>{f(!0),v(null);try{let t=await o.Ll.getPlacePredictions(e,{types:["establishment","geocode","address"],country:"us"});f(!1),m(t),P(0)}catch(n){console.error("Error fetching place suggestions:",n),f(!1),m([]);let t=n instanceof Error?n.message:"Failed to fetch suggestions";v(t),b<2&&t.includes("network")&&(P(e=>e+1),setTimeout(()=>{C(e)},1e3*(b+1)))}},L=e=>{var n;a(e),t(e),h(!1),m([]),null===(n=k.current)||void 0===n||n.focus()},E=e=>{var n;let s=e.description;a(s),t(s),h(!1),m([]),null===(n=k.current)||void 0===n||n.focus()},T=[{label:"ORB Certified",value:"ORB",icon:"✓",color:"bg-agency-orb"},{label:"KM Certified",value:"KM",icon:"\uD83E\uDD5B",color:"bg-agency-km"},{label:"KDM Certified",value:"KDM",icon:"\uD83C\uDF7D️",color:"bg-agency-kdm"},{label:"Diamond K",value:"Diamond K",icon:"\uD83D\uDC8E",color:"bg-agency-diamond-k"},{label:"Meat Restaurants",value:"meat",icon:"\uD83E\uDD69",color:"bg-kosher-meat"},{label:"Dairy Restaurants",value:"dairy",icon:"\uD83E\uDD5B",color:"bg-kosher-dairy"},{label:"Pareve Restaurants",value:"pareve",icon:"\uD83E\uDD6C",color:"bg-kosher-pareve"},{label:"Miami Beach",value:"Miami Beach",icon:"\uD83C\uDFD6️",color:"bg-accent-blue"},{label:"Hollywood FL",value:"Hollywood",icon:"\uD83C\uDFAC",color:"bg-accent-orange"},{label:"Boca Raton",value:"Boca",icon:"\uD83C\uDF34",color:"bg-accent-green"}],I=(0,i.qP)(T,e=>e.label.toLowerCase().includes(l.toLowerCase())||e.value.toLowerCase().includes(l.toLowerCase())),S=g.length>0,_=I.length>0,A=d&&(l.length>0||c);return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("form",{onSubmit:e=>e.preventDefault(),children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:(0,s.jsx)("svg",{className:"h-5 w-5 transition-colors duration-200 ".concat(c?"text-jewgo-400":"text-neutral-400"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,s.jsx)("input",{ref:k,type:"text",placeholder:n,value:l,onChange:e=>{let t=e.target.value;a(t),h(t.length>0),v(null)},onFocus:()=>{u(!0),l.length>0&&h(!0)},onBlur:()=>{u(!1),setTimeout(()=>{h(!1),m([])},200)},onKeyDown:e=>{if("Escape"===e.key){var t;h(!1),m([]),null===(t=k.current)||void 0===t||t.blur()}},className:"w-full pl-12 pr-12 py-2.5 sm:py-3 rounded-xl bg-white border border-neutral-300 focus:border-jewgo-400 focus:ring-jewgo-400/20 focus:outline-none transition-all duration-200 shadow-soft text-base",autoComplete:"off"}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:l&&(0,s.jsx)("button",{type:"button",onClick:()=>{var e;a(""),t(""),m([]),v(null),y(null),P(0),null===(e=k.current)||void 0===e||e.focus()},className:"p-1 text-neutral-400 hover:text-jewgo-400 transition-colors duration-200",title:"Clear search",children:(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})})]})}),A&&(0,s.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-neutral-200 rounded-xl shadow-strong z-50 animate-fade-in-up max-h-80 overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-2",children:[l.length>0&&(0,s.jsxs)("div",{className:"text-xs text-neutral-500 px-3 py-1 border-b border-neutral-100 mb-2",children:['Search suggestions for "',l,'"']}),S&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsxs)("div",{className:"text-xs text-neutral-500 px-3 py-1 mb-2 flex items-center",children:[(0,s.jsxs)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Locations & Places"]}),(0,s.jsx)("div",{className:"space-y-1",children:g.slice(0,5).map(e=>(0,s.jsxs)("button",{onClick:()=>E(e),className:"w-full text-left px-3 py-2 text-sm text-neutral-700 hover:bg-neutral-50 rounded-lg transition-colors duration-200 flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-accent-blue rounded-full flex-shrink-0"}),(0,s.jsx)("span",{className:"text-sm",children:"\uD83D\uDCCD"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium",children:e.structured_formatting.main_text}),(0,s.jsx)("div",{className:"text-xs text-neutral-500",children:e.structured_formatting.secondary_text})]})]},e.place_id))})]}),x&&(0,s.jsx)("div",{className:"px-3 py-2 text-sm text-status-error bg-status-error-light rounded-lg mb-2",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),x]})}),p&&(0,s.jsxs)("div",{className:"px-3 py-2 text-sm text-neutral-500 flex items-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-jewgo-400 mr-2"}),"Searching locations..."]}),_&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-xs text-neutral-500 px-3 py-1 mb-2 flex items-center",children:[(0,s.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Quick Searches"]}),(0,s.jsx)("div",{className:"space-y-1",children:I.map((e,t)=>(0,s.jsxs)("button",{onClick:()=>L(e.value),className:"w-full text-left px-3 py-2 text-sm text-neutral-700 hover:bg-neutral-50 rounded-lg transition-colors duration-200 flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"w-2 h-2 ".concat(e.color," rounded-full flex-shrink-0")}),(0,s.jsx)("span",{className:"text-sm",children:e.icon}),(0,s.jsx)("span",{className:"flex-1",children:e.label})]},t))})]}),!S&&!_&&!p&&!x&&l.length>0&&(0,s.jsxs)("div",{className:"px-3 py-2 text-sm text-neutral-500",children:['No suggestions found for "',l,'"']}),!l&&!S&&!_&&!x&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-xs text-neutral-500 px-3 py-1",children:"Popular searches"}),T.slice(0,5).map((e,t)=>(0,s.jsxs)("button",{onClick:()=>L(e.value),className:"w-full text-left px-3 py-2 text-sm text-neutral-700 hover:bg-neutral-50 rounded-lg transition-colors duration-200 flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"w-2 h-2 ".concat(e.color," rounded-full flex-shrink-0")}),(0,s.jsx)("span",{className:"text-sm",children:e.icon}),(0,s.jsx)("span",{className:"flex-1",children:e.label})]},t))]})]})})]})}},2284:function(e,t,n){"use strict";n.d(t,{Ll:function(){return o},MK:function(){return i}});var s=n(257);class r{static getInstance(){return r.instance||(r.instance=new r),r.instance}getCachedData(e){let t=this.cache.get(e);return t&&Date.now()-t.timestamp<t.ttl?t.data:(t&&this.cache.delete(e),null)}setCachedData(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.DEFAULT_CACHE_TTL;this.cache.set(e,{data:t,timestamp:Date.now(),ttl:n})}cleanupCache(){let e=Date.now(),t=[];this.cache.forEach((n,s)=>{e-n.timestamp>n.ttl&&t.push(s)}),t.forEach(e=>{this.cache.delete(e)})}async initialize(){if(this.isInitialized){console.log("Google Places API already initialized, skipping...");return}if(this.initPromise)return console.log("Google Places API initialization already in progress, waiting..."),this.initPromise;let e=Date.now();if(e-this.lastInitAttempt<this.INIT_RETRY_DELAY){console.log("Google Places API initialization retry too soon, skipping...");return}this.lastInitAttempt=e,console.log("Initializing Google Places API..."),this.initPromise=new Promise((e,t)=>{let n=0,r=()=>{if(n++,window.google&&window.google.maps&&window.google.maps.places){this.isInitialized=!0,console.log("Google Places API initialized successfully"),e();return}if(n>=300){let e="Google Maps failed to load within 30 seconds. Please check your internet connection and try again.";console.error(e),t(Error(e));return}setTimeout(r,100)};if(!s.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY){let e="Google Maps API key is missing. Please set NEXT_PUBLIC_GOOGLE_MAPS_API_KEY in your environment variables.";console.error(e),t(Error(e));return}r()});try{await this.initPromise}catch(e){throw this.isInitialized=!1,this.initPromise=null,e}return this.initPromise}resetInitialization(){this.isInitialized=!1,this.initPromise=null,this.lastInitAttempt=0,console.log("Google Places API initialization state reset")}isReady(){return this.isInitialized&&!!(window.google&&window.google.maps&&window.google.maps.places)}clearCache(){this.cache.clear(),console.log("Google Places API cache cleared")}getCacheStats(){return this.cleanupCache(),{size:this.cache.size,keys:Array.from(this.cache.keys())}}async searchPlaces(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(await this.initialize(),!e||"string"!=typeof e||""===e.trim())return console.warn("Invalid query provided to searchPlaces:",e),[];try{let n="search:".concat(e,":").concat(JSON.stringify(t)),s=this.getCachedData(n);if(s)return console.log("Using cached search result for:",e),s;let r={query:e.trim(),location:t.location?new google.maps.LatLng(t.location.lat,t.location.lng):void 0,radius:t.radius,types:t.types},o=await new Promise((e,n)=>{let s=document.createElement("div");window.google.maps.places.Place?new window.google.maps.places.Place(s).textSearch(r,(n,s)=>{s===window.google.maps.places.PlacesServiceStatus.OK&&n?e(n.slice(0,t.limit||20)):e([])}):new window.google.maps.places.PlacesService(s).textSearch(r,(n,s)=>{s===window.google.maps.places.PlacesServiceStatus.OK&&n?e(n.slice(0,t.limit||20)):e([])})});return this.setCachedData(n,o,3e5),console.log("Cached search result for:",e),o}catch(e){return console.error("Error searching places:",e),[]}}async getPlacePredictions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(await this.initialize(),!e||"string"!=typeof e||""===e.trim())return console.warn("Invalid input provided to getPlacePredictions:",e),[];try{let n={input:e.trim(),types:t.types||["establishment"],location:t.location?new google.maps.LatLng(t.location.lat,t.location.lng):void 0,radius:t.radius,componentRestrictions:t.country?{country:t.country}:void 0};return new Promise((e,t)=>{window.google.maps.places.AutocompleteSuggestion?new window.google.maps.places.AutocompleteSuggestion().getPlacePredictions(n).then(t=>{e(t.predictions||[])}).catch(t=>{console.error("AutocompleteSuggestion error:",t),e([])}):window.google.maps.places.AutocompleteService?new window.google.maps.places.AutocompleteService().getPlacePredictions(n,(t,n)=>{n===window.google.maps.places.PlacesServiceStatus.OK&&t?e(t):e([])}):e([])})}catch(e){return console.error("Error getting place predictions:",e),[]}}async getPlaceDetails(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["name","formatted_address","geometry","rating","user_ratings_total","photos","opening_hours","website","formatted_phone_number","price_level"];if(await this.initialize(),!e||"string"!=typeof e||""===e.trim())return console.warn("Invalid placeId provided to getPlaceDetails:",e),null;try{let n={placeId:e.trim(),fields:t};return new Promise((e,t)=>{let s=document.createElement("div");window.google.maps.places.Place?new window.google.maps.places.Place(s).getDetails(n,(t,n)=>{n===window.google.maps.places.PlacesServiceStatus.OK&&t?e(t):e(null)}):new window.google.maps.places.PlacesService(s).getDetails(n,(t,n)=>{n===window.google.maps.places.PlacesServiceStatus.OK&&t?e(t):e(null)})})}catch(e){return console.error("Error getting place details:",e),null}}constructor(){this.isInitialized=!1,this.initPromise=null,this.lastInitAttempt=0,this.INIT_RETRY_DELAY=6e4,this.cache=new Map,this.DEFAULT_CACHE_TTL=3e5}}let o=r.getInstance();async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.searchPlaces(e,t)}},257:function(e,t,n){"use strict";var s,r;e.exports=(null==(s=n.g.process)?void 0:s.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(4227)},4227:function(e){!function(){var t={229:function(e){var t,n,s,r=e.exports={};function o(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var a=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?a=s.concat(a):u=-1,a.length&&h())}function h(){if(!c){var e=l(d);c=!0;for(var t=a.length;t;){for(s=a,a=[];++u<t;)s&&s[u].run();u=-1,t=a.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new g(e,t)),1!==a.length||c||l(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function s(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={exports:{}},i=!0;try{t[e](o,o.exports,s),i=!1}finally{i&&delete n[e]}return o.exports}s.ab="//";var r=s(229);e.exports=r}()}}]);