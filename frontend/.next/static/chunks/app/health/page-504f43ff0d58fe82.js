(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5653],{105:(e,s,t)=>{Promise.resolve().then(t.bind(t,6997))},6997:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(5155),r=t(2115);let n="https://jewgo.onrender.com";class l{static async checkHealth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,s=Date.now();try{let t=new AbortController,a=setTimeout(()=>t.abort(),e),r=await fetch("".concat(n,"/health"),{method:"GET",headers:{Accept:"application/json"},signal:t.signal});clearTimeout(a);let l=Date.now()-s;if(!r.ok)return{isHealthy:!1,error:"HTTP ".concat(r.status,": ").concat(r.statusText),responseTime:l};let c=await r.json();return{isHealthy:"healthy"===c.status,response:c,responseTime:l}}catch(a){let t=Date.now()-s;if(a instanceof Error&&"AbortError"===a.name)return{isHealthy:!1,error:"Request timed out after ".concat(e,"ms - backend server may be down or overloaded"),responseTime:t};return{isHealthy:!1,error:a instanceof Error?a.message:"Unknown error",responseTime:t}}}static async checkApiEndpoints(){let e,s=await this.checkHealth(),t=Date.now(),a=!1;try{let s=new AbortController,t=setTimeout(()=>s.abort(),15e3),r=await fetch("".concat(n,"/api/restaurants?limit=1"),{method:"GET",headers:{Accept:"application/json"},signal:s.signal});if(clearTimeout(t),r.ok){let e=await r.json();a=e&&(Array.isArray(e)||e.restaurants&&Array.isArray(e.restaurants))}else e="HTTP ".concat(r.status,": ").concat(r.statusText)}catch(s){e=s instanceof Error&&"AbortError"===s.name?"Request timed out":s instanceof Error?s.message:"Unknown error"}return{health:s,restaurants:{success:a,error:e,responseTime:Date.now()-t}}}}function c(){let[e,s]=(0,r.useState)(null),[t,n]=(0,r.useState)(!0),[c,i]=(0,r.useState)(null),o=async()=>{n(!0);try{let e=await l.checkApiEndpoints();s(e),i(new Date)}catch(e){console.error("Health check failed:",e),s({health:{isHealthy:!1,error:e instanceof Error?e.message:"Unknown error",responseTime:0},restaurants:{success:!1,error:e instanceof Error?e.message:"Unknown error",responseTime:0}})}finally{n(!1)}};(0,r.useEffect)(()=>{o()},[]);let h=e=>e?"text-green-600":"text-red-600",d=e=>e?"✅":"❌";return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Backend Health Check"}),(0,a.jsx)("button",{onClick:o,disabled:t,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:t?"Checking...":"Refresh"})]}),c&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-6",children:["Last checked: ",c.toLocaleString()]}),e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-3 flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:d(e.health.isHealthy)}),"Health Endpoint",(0,a.jsxs)("span",{className:"ml-2 text-sm ".concat(h(e.health.isHealthy)),children:["(",e.health.responseTime,"ms)"]})]}),e.health.isHealthy?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-green-600 font-medium",children:"✅ Backend is healthy"}),e.health.response&&(0,a.jsx)("div",{className:"bg-gray-50 p-3 rounded",children:(0,a.jsx)("pre",{className:"text-sm overflow-auto",children:JSON.stringify(e.health.response,null,2)})})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-red-600 font-medium",children:"❌ Backend is unhealthy"}),e.health.error&&(0,a.jsx)("p",{className:"text-red-600 text-sm",children:e.health.error})]})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-3 flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:d(e.restaurants.success)}),"Restaurants API",(0,a.jsxs)("span",{className:"ml-2 text-sm ".concat(h(e.restaurants.success)),children:["(",e.restaurants.responseTime,"ms)"]})]}),e.restaurants.success?(0,a.jsx)("p",{className:"text-green-600 font-medium",children:"✅ Restaurants API is working"}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-red-600 font-medium",children:"❌ Restaurants API is not working"}),e.restaurants.error&&(0,a.jsx)("p",{className:"text-red-600 text-sm",children:e.restaurants.error})]})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Overall Status"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"font-medium",children:["Backend Health:",(0,a.jsx)("span",{className:"ml-2 ".concat(h(e.health.isHealthy)),children:e.health.isHealthy?"Healthy":"Unhealthy"})]}),(0,a.jsxs)("p",{className:"font-medium",children:["API Endpoints:",(0,a.jsx)("span",{className:"ml-2 ".concat(h(e.restaurants.success)),children:e.restaurants.success?"Working":"Not Working"})]}),!e.health.isHealthy&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded",children:[(0,a.jsx)("h3",{className:"font-medium text-yellow-800 mb-2",children:"Troubleshooting Tips:"}),(0,a.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,a.jsx)("li",{children:"• The backend server may be in sleep mode (common with free hosting)"}),(0,a.jsx)("li",{children:"• Try refreshing the page in a few minutes"}),(0,a.jsx)("li",{children:"• Check if the backend service is running on Render"}),(0,a.jsx)("li",{children:"• Database connection issues may be causing the timeout"})]})]})]})]})]}),t&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Checking backend status..."})]})]})})})}}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=105)),_N_E=e.O()}]);