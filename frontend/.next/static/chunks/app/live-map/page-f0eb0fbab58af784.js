(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[773],{2037:function(e,t,a){Promise.resolve().then(a.bind(a,7702))},7702:function(e,t,a){"use strict";a.d(t,{default:function(){return g}});var n=a(7437),r=a(2265),o=a(9376),l=a(4196),s=a(5435),i=a(5219);function c(e){let{restaurants:t,onRestaurantSelect:a,selectedRestaurantId:o,userLocation:l,mapCenter:s,className:i="h-96"}=e,[c,d]=(0,r.useState)(!1),[u,g]=(0,r.useState)(null),[m,p]=(0,r.useState)(null),h=(0,r.useRef)(null),w=(0,r.useRef)(null),x=(0,r.useRef)([]),f=(0,r.useRef)(null),y=(0,r.useRef)(null),[v,b]=(0,r.useState)(!1),j=t.filter(e=>{if(!e.latitude||!e.longitude)return!1;let t=parseFloat(e.latitude.toString()),a=parseFloat(e.longitude.toString());return!(isNaN(t)||isNaN(a))&&(0!==t||0!==a)&&!(t<-90)&&!(t>90)&&!(a<-180)&&!(a>180)});console.log("InteractiveRestaurantMap Debug:",{totalRestaurants:t.length,restaurantsWithCoords:j.length,userLocation:!!l,mapCenter:!!s}),(0,r.useEffect)(()=>{(()=>{if(window.google&&window.google.maps&&window.google.maps.LatLngBounds){b(!0);return}if(document.querySelector('script[src*="maps.googleapis.com"]')){let e=setInterval(()=>{window.google&&window.google.maps&&window.google.maps.LatLngBounds&&(b(!0),clearInterval(e))},100);setTimeout(()=>{clearInterval(e),window.google&&window.google.maps||g("Google Maps API failed to load")},1e4);return}let e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=".concat("","&libraries=places,geometry&loading=async"),e.async=!0,e.defer=!0,e.onload=()=>{let e=setInterval(()=>{window.google&&window.google.maps&&window.google.maps.LatLngBounds&&(b(!0),clearInterval(e))},100);setTimeout(()=>{clearInterval(e),window.google&&window.google.maps||g("Google Maps API failed to initialize")},1e4)},e.onerror=()=>{g("Failed to load Google Maps API")},document.head.appendChild(e)})()},[]),(0,r.useEffect)(()=>{if(v&&h.current&&!u)try{if(!window.google||!window.google.maps||!window.google.maps.LatLngBounds){console.error("Google Maps API not fully loaded"),g("Google Maps API not fully loaded");return}if(!w.current){let e=new window.google.maps.LatLngBounds,t={lat:25.7617,lng:-80.1918};l&&(t={lat:l.latitude,lng:l.longitude},e.extend(new window.google.maps.LatLng(l.latitude,l.longitude))),j.length>0&&j.forEach(t=>{void 0!==t.latitude&&void 0!==t.longitude&&e.extend(new window.google.maps.LatLng(t.latitude,t.longitude))});let a=new window.google.maps.Map(h.current,{center:t,zoom:l?14:10,mapTypeId:window.google.maps.MapTypeId.ROADMAP,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"simplified"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"simplified"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#e3f2fd"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e8f5e8"}]}],zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0,gestureHandling:"cooperative"});w.current=a,y.current=new window.google.maps.InfoWindow({disableAutoPan:!1,maxWidth:300}),s?(a.setCenter(s),a.setZoom(16)):l?(a.setCenter({lat:l.latitude,lng:l.longitude}),a.setZoom(14)):j.length>0&&a.fitBounds(e),d(!0)}}catch(e){console.error("Error initializing map:",e),g("Failed to initialize map")}},[v,u,l,s]),(0,r.useEffect)(()=>{if(w.current&&c&&l)try{let e=w.current;f.current&&f.current.setMap(null);let t=new window.google.maps.LatLng(l.latitude,l.longitude),a={url:"data:image/svg+xml;charset=UTF-8,".concat(encodeURIComponent('\n          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <circle cx="16" cy="16" r="8" fill="#4285F4" stroke="white" stroke-width="3"/>\n            <circle cx="16" cy="16" r="4" fill="white"/>\n            <circle cx="16" cy="16" r="12" fill="#4285F4" opacity="0.3"/>\n          </svg>\n        ')),scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(16,16)};f.current=new window.google.maps.Marker({position:t,map:e,icon:a,title:"Your Location",zIndex:1e3}),f.current.addListener("click",()=>{if(e.panTo(t),e.setZoom(10),y.current){let t='\n            <div class="p-3 max-w-xs">\n              <div class="flex items-center space-x-2">\n                <div class="w-3 h-3 bg-blue-500 rounded-full"></div>\n                <h3 class="font-semibold text-gray-900 text-sm">Your Location</h3>\n              </div>\n              <p class="text-gray-600 text-xs mt-1">\n                '.concat(l.latitude.toFixed(6),", ").concat(l.longitude.toFixed(6),"\n              </p>\n              ").concat(l.accuracy?'\n                <p class="text-gray-500 text-xs mt-1">\n                  Accuracy: \xb1'.concat(Math.round(l.accuracy)," meters\n                </p>\n              "):"","\n            </div>\n          ");y.current.setContent(t),y.current.open(e,f.current)}})}catch(e){console.error("Error updating user location marker:",e)}},[l,c]),(0,r.useEffect)(()=>{if(w.current&&c&&l)try{let e=w.current;console.log("Updating map center to user location:",l),e.panTo({lat:l.latitude,lng:l.longitude}),e.setZoom(14)}catch(e){console.error("Error updating map center:",e)}},[l,c]),(0,r.useEffect)(()=>{if(console.log("mapCenter prop changed:",s),console.log("mapLoaded:",c),console.log("mapInstanceRef.current:",!!w.current),!w.current||!c||!s){console.log("Skipping map center update - conditions not met");return}try{let e=w.current;console.log("Updating map center from URL parameters:",s),e.panTo(s),e.setZoom(16),console.log("Map center updated successfully")}catch(e){console.error("Error updating map center from URL parameters:",e)}},[s,c]),(0,r.useEffect)(()=>{if(w.current&&c&&0!==j.length)try{let e=w.current;x.current.forEach(e=>e.setMap(null)),x.current=[],j.forEach(t=>{let n;if(void 0===t.latitude||void 0===t.longitude)return;let r=new window.google.maps.LatLng(t.latitude,t.longitude),s=o===t.id,i=null;if(l){let e=(t.latitude-l.latitude)*Math.PI/180,a=(t.longitude-l.longitude)*Math.PI/180,n=Math.sin(e/2)*Math.sin(e/2)+Math.cos(l.latitude*Math.PI/180)*Math.cos(t.latitude*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);i=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n))*3959}let c=(e=>{switch(null==e?void 0:e.toLowerCase()){case"meat":return"#dc2626";case"dairy":return"#2563eb";case"pareve":return"#059669";default:return"#4b5563"}})(t.kosher_category),d=s?"#FFD700":c;if(window.google.maps.marker&&window.google.maps.marker.AdvancedMarkerElement)try{let a=new window.google.maps.marker.PinElement({background:d,borderColor:"#000000",glyphColor:"#FFFFFF",scale:1.5});n=new window.google.maps.marker.AdvancedMarkerElement({position:r,map:e,content:a.element,title:t.name})}catch(o){console.warn("AdvancedMarkerElement failed, falling back to regular Marker:",o);let a={url:"data:image/svg+xml;charset=UTF-8,".concat(encodeURIComponent('\n                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                  <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" \n                        fill="'.concat(d,'" \n                        stroke="#000000" \n                        stroke-width="1.5"/>\n                  <circle cx="12" cy="9" r="2.5" fill="white"/>\n                  <circle cx="12" cy="9" r="1.5" fill="').concat(d,'"/>\n                </svg>\n              '))),scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(12,24)};n=new window.google.maps.Marker({position:r,map:e,icon:a,title:t.name})}else{let a={url:"data:image/svg+xml;charset=UTF-8,".concat(encodeURIComponent('\n              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" \n                      fill="'.concat(d,'" \n                      stroke="#000000" \n                      stroke-width="1.5"/>\n                <circle cx="12" cy="9" r="2.5" fill="white"/>\n                <circle cx="12" cy="9" r="1.5" fill="').concat(d,'"/>\n              </svg>\n            '))),scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(12,24)};n=new window.google.maps.Marker({position:r,map:e,icon:a,title:t.name})}n.addListener("click",()=>{if(console.log("Marker clicked:",t.name),p(t),null==a||a(t.id),y.current){let a=L(t,i);y.current.setContent(a),y.current.open(e,n)}}),x.current.push(n)})}catch(e){console.error("Error updating markers:",e)}},[j,o,c,l]);let N=e=>{var t;return(null===(t=e.image_url)||void 0===t?void 0:t.includes("maps.googleapis.com/maps/api/place/photo"))?null:e.image_url},L=(e,t)=>{let a=N(e);return'\n      <div class="p-3 max-w-xs relative">\n        <button onclick="this.parentElement.parentElement.parentElement.close()" \n                class="absolute top-2 right-2 text-gray-400 hover:text-gray-600 text-lg font-bold leading-none">\n          \xd7\n        </button>\n        <div class="flex items-start space-x-3">\n          '.concat(a?'\n            <img src="'.concat(a,'" alt="').concat(e.name,'" \n                 class="w-16 h-12 object-cover rounded-lg flex-shrink-0"\n                 loading="lazy" />\n          '):'\n            <div class="w-16 h-12 bg-gray-200 rounded-lg flex-shrink-0 flex items-center justify-center">\n              <span class="text-gray-400 text-xs">No Image</span>\n            </div>\n          ','\n          <div class="flex-1 min-w-0">\n            <h3 class="font-semibold text-gray-900 text-sm leading-tight mb-1">').concat(e.name,'</h3>\n            <p class="text-gray-600 text-xs mb-1">').concat(e.address,"</p>\n            ").concat(null!=t?'\n              <p class="text-blue-600 text-xs font-medium mb-1">\uD83D\uDCCD '.concat(t.toFixed(1)," miles away</p>\n            "):"","\n            ").concat(e.certifying_agency?'\n              <span class="inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full mb-1">\n                '.concat(e.certifying_agency,"\n              </span>\n            "):"","\n            ").concat(e.kosher_category?'\n              <span class="inline-block '.concat("meat"===e.kosher_category?"bg-red-50 text-red-900 border border-red-200":"dairy"===e.kosher_category?"bg-blue-50 text-blue-900 border border-blue-200":"pareve"===e.kosher_category?"bg-yellow-50 text-yellow-900 border border-yellow-200":"bg-gray-100 text-gray-800",' text-xs px-2 py-1 rounded-full mb-1">\n                ').concat(e.kosher_category,"\n              </span>\n            "):"","\n            ").concat(e.avg_price?'\n              <p class="text-green-600 text-xs font-medium">'.concat(e.avg_price,"</p>\n            "):"",'\n          </div>\n        </div>\n        <div class="mt-3 pt-2 border-t border-gray-200">\n          <a href="/restaurant/').concat(e.id,'" \n             class="text-blue-600 hover:text-blue-800 text-xs font-medium">\n            View Details →\n          </a>\n        </div>\n      </div>\n    ')};return v||u?u?(0,n.jsx)("div",{className:"bg-gray-100 rounded-lg flex items-center justify-center ".concat(i),children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-red-500 text-4xl mb-4",children:"⚠️"}),(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Map Error"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:u})]})}):0===j.length?(0,n.jsx)("div",{className:"bg-gray-100 rounded-lg flex items-center justify-center ".concat(i),children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDDFA️"}),(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Location Data"}),(0,n.jsx)("p",{className:"text-gray-600",children:"No restaurants with location data available"})]})}):(0,n.jsxs)("div",{className:"relative bg-white rounded-lg shadow-lg overflow-hidden ".concat(i),children:[(0,n.jsx)("div",{ref:h,className:"w-full h-full"}),(0,n.jsx)("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-lg px-3 py-2 shadow-lg",children:(0,n.jsxs)("div",{className:"text-xs font-medium text-gray-700",children:[j.length," restaurants",l&&(0,n.jsx)("span",{className:"text-blue-600 ml-2",children:"\uD83D\uDCCD Your location"})]})}),(0,n.jsxs)("div",{className:"absolute top-4 left-4 bg-white/95 backdrop-blur-sm rounded-lg px-3 py-2 shadow-lg",children:[(0,n.jsx)("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"Kosher Types:"}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,n.jsx)("span",{className:"text-xs text-gray-600",children:"Meat"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,n.jsx)("span",{className:"text-xs text-gray-600",children:"Dairy"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,n.jsx)("span",{className:"text-xs text-gray-600",children:"Pareve"})]})]})]}),l&&(0,n.jsx)("div",{className:"absolute top-4 right-4",children:(0,n.jsx)("button",{onClick:()=>{w.current&&l&&(w.current.panTo(new window.google.maps.LatLng(l.latitude,l.longitude)),w.current.setZoom(10))},className:"bg-white/95 backdrop-blur-sm rounded-lg p-2 shadow-lg hover:bg-white transition-colors",title:"Center on your location",children:(0,n.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})})})})]}):(0,n.jsx)("div",{className:"bg-gray-100 rounded-lg flex items-center justify-center ".concat(i),children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-jewgo-primary mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Loading interactive map..."})]})})}var d=a(4950),u=a(3097);function g(){let e=(0,o.useSearchParams)(),[t,a]=(0,r.useState)([]),[g,m]=(0,r.useState)([]),[p,h]=(0,r.useState)(!0),[w,x]=(0,r.useState)(null),[f,y]=(0,r.useState)(""),[v,b]=(0,r.useState)(null),[j,N]=(0,r.useState)(null),[L,M]=(0,r.useState)(!1),[C,k]=(0,r.useState)(null),[E,I]=(0,r.useState)({}),[S,_]=(0,r.useState)(null),[F,P]=(0,r.useState)("eatery");(0,r.useEffect)(()=>{let t=null==e?void 0:e.get("lat"),a=null==e?void 0:e.get("lng"),n=null==e?void 0:e.get("name");if(t&&a){let e=parseFloat(t),r=parseFloat(a);!isNaN(e)&&!isNaN(r)&&e>=-90&&e<=90&&r>=-180&&r<=180?(_({lat:e,lng:r}),n&&y(decodeURIComponent(n))):console.warn("Invalid coordinates in URL parameters:",{lat:t,lng:a,latitude:e,longitude:r})}},[e]),(0,r.useEffect)(()=>{A()},[]),(0,r.useEffect)(()=>{T()},[]),(0,r.useEffect)(()=>{j&&A()},[j]),(0,r.useEffect)(()=>{console.log("Live map useEffect triggered - updateDisplayedRestaurants"),console.log("Live map allRestaurants count:",t.length),console.log("searchQuery:",f),console.log("activeFilters:",E),console.log("userLocation:",j);let e=[...t];if(f.trim()){let t=f.toLowerCase().trim();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.address.toLowerCase().includes(t)||e.city.toLowerCase().includes(t)||e.state.toLowerCase().includes(t)||e.listing_type&&e.listing_type.toLowerCase().includes(t)||e.certifying_agency&&e.certifying_agency.toLowerCase().includes(t))}if(E.agency&&(e=e.filter(e=>e.certifying_agency&&e.certifying_agency.toLowerCase().includes(E.agency.toLowerCase()))),E.dietary&&(e=e.filter(e=>{var t;let a=(null===(t=e.kosher_category)||void 0===t?void 0:t.toLowerCase())||"";switch(E.dietary){case"meat":return"meat"===a;case"dairy":return"dairy"===a;case"pareve":return"pareve"===a;default:return!0}})),E.category&&(e=e.filter(e=>e.listing_type&&e.listing_type.toLowerCase().includes(E.category.toLowerCase()))),E.nearMe&&j){let t=E.distanceRadius||10;e=e.filter(e=>!!e.latitude&&!!e.longitude&&D(j.latitude,j.longitude,e.latitude,e.longitude)<=t)}if(E.openNow){let t=new Date,a=t.toLocaleDateString("en-US",{weekday:"long"}).toLowerCase(),n=60*t.getHours()+t.getMinutes();e=e.filter(e=>{if(!e.hours_of_operation)return!1;try{let t="string"==typeof e.hours_of_operation?JSON.parse(e.hours_of_operation):e.hours_of_operation;if(!Array.isArray(t))return!1;let r=t.find(e=>e.day===a);if(!r)return!1;let o=z(r.open),l=z(r.close);if(-1===o||-1===l)return!1;if(l<o)return n>=o||n<=l;return n>=o&&n<=l}catch(t){return console.error("Error parsing hours for restaurant:",e.name,t),!1}})}j&&e.sort((e,t)=>e.latitude&&e.longitude?t.latitude&&t.longitude?D(j.latitude,j.longitude,e.latitude,e.longitude)-D(j.latitude,j.longitude,t.latitude,t.longitude):-1:1),console.log("Filtered restaurants count:",e.length),m(e)},[t,f,E,j]);let A=(0,r.useCallback)(async()=>{try{h(!0),x(null);let e="/api/restaurants";if(j){let t=f.trim()?"".concat(e,"?limit=1000"):"".concat(e,"?limit=200&lat=").concat(j.latitude,"&lng=").concat(j.longitude,"&radius=50");console.log("Live map fetching from:",t);let n=await fetch(t);if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));let r=await n.json();if(r.data&&Array.isArray(r.data))a(r.data);else if(r.restaurants&&Array.isArray(r.restaurants))a(r.restaurants);else throw Error("Invalid response format")}else{let t=await fetch("".concat(e,"?limit=1000"));if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let n=await t.json();if(n.data&&Array.isArray(n.data))a(n.data);else if(n.restaurants&&Array.isArray(n.restaurants))a(n.restaurants);else throw Error("Invalid response format")}}catch(e){console.error("Error fetching restaurants:",e),x(e instanceof Error?e.message:"Failed to fetch restaurants")}finally{h(!1)}},[j,f]),T=()=>{if(!navigator.geolocation){k("Geolocation is not supported by this browser.");return}M(!0),k(null),navigator.geolocation.getCurrentPosition(e=>{N({latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy}),M(!1)},e=>{k(R(e.code)),M(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},R=e=>{switch(e){case 1:return"Location access denied. Please enable location services.";case 2:return"Location unavailable. Please try again.";case 3:return"Location request timed out. Please try again.";default:return"Unable to get your location. Please try again."}},D=(e,t,a,n)=>{let r=(a-e)*Math.PI/180,o=(n-t)*Math.PI/180,l=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*3959},z=e=>{let t=e.toLowerCase().trim().match(/(\d+):?(\d*)\s*(am|pm)/);if(!t)return -1;let a=parseInt(t[1]),n=t[2]?parseInt(t[2]):0,r=t[3];return"pm"===r&&12!==a&&(a+=12),"am"===r&&12===a&&(a=0),60*a+n},U=()=>{y(""),I({})},Z=()=>!!f.trim()||Object.values(E).some(e=>void 0!==e&&!1!==e&&""!==e);return p?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsx)("div",{className:"text-gray-500",children:"Loading restaurants..."})}):w?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-red-500",children:["Error: ",w]})}):(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)(l.Z,{}),(0,n.jsx)("div",{className:"px-4 py-2 bg-white border-b border-gray-100",children:(0,n.jsx)(s.Z,{onSearch:e=>{y(e)},placeholder:"Search restaurants..."})}),(0,n.jsx)("div",{className:"px-4 py-2 bg-white border-b border-gray-100",children:(0,n.jsx)(i.Z,{onShowFilters:()=>{},onShowMap:()=>{},onAddEatery:()=>{},onFilterChange:(e,t)=>{I(a=>({...a,[e]:t}))},onToggleFilter:(e,t)=>{I(a=>({...a,[e]:t}))},onDistanceChange:e=>{I(t=>({...t,distanceRadius:e}))},onClearAll:U,activeFilters:E,userLocation:j?{lat:j.latitude,lng:j.longitude}:null,locationLoading:L,hasActiveFilters:Z(),isOnMapPage:!0})}),(0,n.jsx)("div",{className:"px-4 py-2 bg-white border-b border-gray-100",children:(0,n.jsx)(u.Z,{activeTab:F,onTabChange:e=>{P(e)}})}),L&&(0,n.jsx)("div",{className:"px-4 py-2 bg-blue-50 text-blue-700 text-sm",children:"Getting your location..."}),C&&(0,n.jsxs)("div",{className:"px-4 py-2 bg-yellow-50 text-yellow-700 text-sm",children:[C,(0,n.jsx)("button",{onClick:T,className:"ml-2 underline hover:no-underline",children:"Try again"})]}),Z()&&(0,n.jsxs)("div",{className:"px-4 py-2 bg-gray-50 text-sm text-gray-600 border-b border-gray-200",children:[(()=>{let e=[];return f.trim()&&e.push('"'.concat(f,'"')),E.agency&&e.push("".concat(E.agency," certified")),E.dietary&&e.push("".concat(E.dietary," only")),E.category&&e.push("".concat(E.category," cuisine")),E.nearMe&&e.push("within ".concat(E.distanceRadius||10," miles")),E.openNow&&e.push("open now"),e.length>0?e.join(", "):"All restaurants"})()," • ",g.length," restaurants",(0,n.jsx)("button",{onClick:U,className:"ml-2 text-blue-600 hover:text-blue-800 underline",children:"Clear all"})]}),(0,n.jsx)("div",{className:"flex-1 relative",children:(0,n.jsx)(c,{restaurants:g,userLocation:j,selectedRestaurantId:null==v?void 0:v.id,onRestaurantSelect:e=>{b(t.find(t=>t.id===e)||null)},mapCenter:S})}),(0,n.jsx)(d.Z,{})]})}}},function(e){e.O(0,[216,592,744],function(){return e(e.s=2037)}),_N_E=e.O()}]);