(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5627],{689:(e,t,s)=>{Promise.resolve().then(s.bind(s,3954))},1819:(e,t,s)=>{"use strict";function a(e,t){if(!e||!Array.isArray(e))return console.warn("safeFilter: Input is not an array:",typeof e,e),[];try{return e.filter(t)}catch(e){return console.error("safeFilter error:",e),[]}}s.d(t,{WD:()=>a})},3954:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(5155),i=s(2115),r=s(1819);function n(){let[e,t]=(0,i.useState)([]),[s,n]=(0,i.useState)(!0),[d,l]=(0,i.useState)(null),[c,p]=(0,i.useState)(null),[o,x]=(0,i.useState)(!1);(0,i.useEffect)(()=>{m()},[]);let m=async()=>{try{n(!0),await new Promise(e=>setTimeout(e,500)),t([{id:1,restaurant_id:1,title:"Shabbat Special",description:"Complete Shabbat meal with soup, main course, and dessert",discount_percent:20,start_date:"2024-01-01",end_date:"2024-12-31",is_paid:!0,payment_status:"paid",special_type:"discount",priority:1,is_active:!0,created_date:"2024-01-01T00:00:00Z",updated_date:"2024-01-01T00:00:00Z"},{id:2,restaurant_id:2,title:"Summer Promotion",description:"Buy one get one free on all ice cream flavors",discount_percent:50,start_date:"2024-06-01",end_date:"2024-08-31",is_paid:!1,payment_status:"unpaid",special_type:"promotion",priority:2,is_active:!0,created_date:"2024-06-01T00:00:00Z",updated_date:"2024-06-01T00:00:00Z"},{id:3,restaurant_id:3,title:"Holiday Event",description:"Special holiday menu with traditional dishes",discount_percent:15,start_date:"2024-09-01",end_date:"2024-10-31",is_paid:!0,payment_status:"paid",special_type:"event",priority:3,is_active:!0,created_date:"2024-09-01T00:00:00Z",updated_date:"2024-09-01T00:00:00Z"}])}catch(e){console.error("Error fetching specials:",e),l("Failed to load specials")}finally{n(!1)}},u=async e=>{if(!c)return void console.error("No special selected for payment");try{t(t=>t.map(t=>t.id===e?{...t,is_paid:!c.is_paid,payment_status:c.is_paid?"unpaid":"paid"}:t)),x(!1),p(null),console.log("Payment status updated for special ".concat(e))}catch(e){console.error("Error updating payment status:",e)}};return s?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-jewgo-primary"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Restaurant Specials Management"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["Total Specials: ",e.length]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["Paid: ",(0,r.WD)(e,e=>e.is_paid).length]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Restaurant"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Special"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["Restaurant #",e.restaurant_id]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),e.description&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.description}),e.discount_percent&&(0,a.jsxs)("div",{className:"text-sm text-green-600 font-medium",children:[e.discount_percent,"% OFF"]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(e=>{let t={discount:"bg-blue-100 text-blue-800",promotion:"bg-purple-100 text-purple-800",event:"bg-orange-100 text-orange-800"};return(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(t[e.special_type]||t.discount),children:e.special_type.charAt(0).toUpperCase()+e.special_type.slice(1)})})(e)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.is_paid?(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Paid"}):(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Unpaid"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsx)("button",{onClick:()=>{p(e),x(!0)},className:"text-jewgo-primary hover:text-jewgo-accent mr-4",children:e.is_paid?"Mark Unpaid":"Mark Paid"})})]},e.id))})]})}),0===e.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-500 mb-4",children:(0,a.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No specials found"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Restaurant specials will appear here once they are created."})]})]})})}),o&&c&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,a.jsxs)("div",{className:"mt-3 text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Update Payment Status"}),(0,a.jsxs)("div",{className:"mb-4 text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Special:"})," ",c.title]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Current Status:"})," ",c.is_paid?"Paid":"Unpaid"]})]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>u(c.id),className:"px-4 py-2 rounded-md text-sm font-medium ".concat(c.is_paid?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"),children:c.is_paid?"Mark as Unpaid":"Mark as Paid"}),(0,a.jsx)("button",{onClick:()=>{x(!1),p(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-400",children:"Cancel"})]})]})})})]})}}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=689)),_N_E=e.O()}]);