(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{6373:function(e,t,a){Promise.resolve().then(a.bind(a,5989))},5989:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var s=a(7437),r=a(2265),n=a(9376),o=a(4196),i=a(3373),c=a(3097),l=a(5219),u=a(681),d=a(4950),g=a(2535);function h(){let e=(0,n.useRouter)(),[t,a]=(0,r.useState)([]),[h,m]=(0,r.useState)([]),[p,y]=(0,r.useState)(!0),[f,x]=(0,r.useState)(""),[v,w]=(0,r.useState)("shuls"),[b,j]=(0,r.useState)({});return((0,r.useEffect)(()=>{(async()=>{try{y(!0);let e=(await (0,g.Nx)()).restaurants.filter(e=>{var t,a;return(null===(t=e.listing_type)||void 0===t?void 0:t.toLowerCase().includes("synagogue"))||(null===(a=e.listing_type)||void 0===a?void 0:a.toLowerCase().includes("shul"))||e.name.toLowerCase().includes("synagogue")||e.name.toLowerCase().includes("shul")||e.name.toLowerCase().includes("temple")});a(e),m(e)}catch(e){console.error("Error loading synagogue locations:",e)}finally{y(!1)}})()},[]),(0,r.useEffect)(()=>{let e=t;f.trim()&&(e=e.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())||e.city.toLowerCase().includes(f.toLowerCase())||e.certifying_agency.toLowerCase().includes(f.toLowerCase()))),m(e)},[t,f]),p)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-gray-500",children:"Loading synagogue locations..."})}):(0,s.jsxs)("div",{className:"min-h-screen bg-neutral-50",children:[(0,s.jsx)(o.Z,{}),(0,s.jsx)("div",{className:"px-4 sm:px-6 py-4 bg-white border-b border-gray-100",children:(0,s.jsx)(i.Z,{onSearch:e=>{x(e)},placeholder:"Search for synagogues...",showAdvancedFilters:!0,useGoogleAPI:!1})}),(0,s.jsx)("div",{className:"px-4 sm:px-6 py-2 bg-white border-b border-gray-100",children:(0,s.jsx)(c.Z,{activeTab:v,onTabChange:t=>{switch(w(t),t){case"mikvahs":e.push("/mikvahs");break;case"shuls":break;case"specials":e.push("/specials");break;case"eatery":e.push("/eatery");break;case"stores":e.push("/stores")}}})}),(0,s.jsx)("div",{className:"px-4 sm:px-6 py-3 bg-white border-b border-gray-100",children:(0,s.jsx)(l.Z,{onShowFilters:()=>{},onShowMap:()=>window.location.href="/live-map",onAddEatery:()=>window.location.href="/add-eatery",onFilterChange:(e,t)=>{j(a=>({...a,[e]:t}))},onToggleFilter:(e,t)=>{j(a=>({...a,[e]:t}))},onDistanceChange:e=>{j(t=>({...t,distanceRadius:e}))},onClearAll:()=>{j({})},onLocationReset:()=>{},activeFilters:b,userLocation:null,locationLoading:!1,hasActiveFilters:Object.values(b).some(e=>void 0!==e&&!1!==e&&""!==e),isOnMapPage:!1})}),(0,s.jsxs)("div",{className:"px-4 sm:px-6 py-3 bg-gray-50 text-sm text-gray-600 border-b border-gray-200",children:[h.length," ",1===h.length?"synagogue":"synagogues"," found"]}),(0,s.jsxs)("div",{className:"px-4 py-6",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:h.map(e=>(0,s.jsx)(u.Z,{restaurant:e},e.id))}),0===h.length&&!p&&(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"text-gray-500 text-lg mb-3 font-medium",children:"No synagogues found"}),(0,s.jsx)("div",{className:"text-gray-400 text-sm",children:"Try adjusting your search or filters"})]})]}),(0,s.jsx)(d.Z,{})]})}},681:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var s=a(7437),r=a(2265),n=a(9376);let o=(0,a(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var i=a(6595);function c(e){let{restaurant:t,className:a=""}=e,c=(0,n.useRouter)(),[l,u]=(0,r.useState)(!1),[d,g]=(0,r.useState)(!1),h=e=>e?e.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()):"",m=()=>t.price_range?t.price_range:t.min_avg_meal_cost&&t.max_avg_meal_cost?"$".concat(t.min_avg_meal_cost," - $").concat(t.max_avg_meal_cost):"Price not available";return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden cursor-pointer hover:shadow-lg hover:scale-[1.01] transition-all duration-200 ".concat(a),onClick:()=>{c.push("/restaurant/".concat(t.id))},children:[(0,s.jsxs)("div",{className:"relative aspect-[4/3] overflow-hidden",children:[(0,s.jsx)("img",{src:t.image_url&&!d?t.image_url:(e=>{let t=(null==e?void 0:e.toLowerCase())||"";return t.includes("pizza")?"/images/placeholders/pizza-placeholder.jpg":t.includes("sushi")||t.includes("japanese")?"/images/placeholders/sushi-placeholder.jpg":t.includes("grill")||t.includes("steak")?"/images/placeholders/grill-placeholder.jpg":t.includes("bakery")?"/images/placeholders/bakery-placeholder.jpg":t.includes("cafe")||t.includes("coffee")?"/images/placeholders/cafe-placeholder.jpg":t.includes("ice cream")||t.includes("dessert")?"/images/placeholders/dessert-placeholder.jpg":"/images/default-restaurant.jpg"})(t.kosher_category||t.listing_type),alt:t.name,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",onError:()=>g(!0),loading:"lazy"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent"}),t.kosher_category&&(0,s.jsx)("div",{className:"absolute top-2 left-2",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium text-white ".concat((e=>{let t=(null==e?void 0:e.toLowerCase())||"";return"dairy"===t?"bg-blue-500":"meat"===t?"bg-[#A70000]":"pareve"===t?"bg-green-500":"bg-gray-500"})(t.kosher_category)),children:h(t.kosher_category)})}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),u(!l)},className:"absolute top-2 right-2 bg-white rounded-full p-1 shadow-md transition-all duration-200 hover:scale-110","aria-label":l?"Remove from favorites":"Add to favorites",children:(0,s.jsx)(o,{className:"w-4 h-4 ".concat(l?"fill-pink-500 text-pink-500":"text-gray-800 hover:text-pink-500")})})]}),(0,s.jsxs)("div",{className:"px-3 py-2",children:[(0,s.jsx)("h3",{className:"text-[15px] font-semibold leading-snug text-gray-900 mb-2 line-clamp-2 group-hover:text-green-600 transition-colors tracking-tight",children:h(t.name)}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500 mb-2",children:[m()&&(0,s.jsx)("span",{children:m()}),m()&&(t.rating||t.star_rating||t.google_rating||0)>0&&(0,s.jsx)("span",{children:"â€¢"}),(t.rating||t.star_rating||t.google_rating||0)>0&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,s.jsx)(i.Z,{className:"w-3.5 h-3.5 text-yellow-500 fill-current"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:(t.rating||t.star_rating||t.google_rating||0).toFixed(1)})]})]})]})]})}},2535:function(e,t,a){"use strict";a.d(t,{Nx:function(){return n},g:function(){return o}});let s="https://jewgo.onrender.com";class r{static async wakeUpBackend(){try{return console.log("Attempting to wake up backend service..."),(await fetch("".concat(s,"/"),{method:"GET",signal:AbortSignal.timeout(5e3)})).ok}catch(e){return console.log("Wake-up attempt failed, continuing with normal request..."),!1}}static async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15e3,n="".concat(s).concat(e),o={...t,headers:{"Content-Type":"application/json",Accept:"application/json",...t.headers}};for(let t=1;t<=a;t++)try{console.log("API request attempt ".concat(t,"/").concat(a,": ").concat(n)),1===t&&e.includes("/api/restaurants")&&await this.wakeUpBackend();let s=new AbortController,i=setTimeout(()=>s.abort(),r),c=await fetch(n,{...o,signal:s.signal});if(clearTimeout(i),!c.ok){let e={message:"HTTP error! status: ".concat(c.status),status:c.status,retryable:c.status>=500||429===c.status};if(404===c.status)throw e;if(e.retryable&&t<a){console.warn("Retryable error, attempting retry ".concat(t+1,"/").concat(a)),await new Promise(e=>setTimeout(e,1e3*t));continue}throw e}let l=c.headers.get("content-type");if(l&&l.includes("application/json")){let e=await c.json();return console.log("API request successful: ".concat(n)),e}throw Error("Invalid response format - expected JSON")}catch(e){if(console.error("API request failed (attempt ".concat(t,"/").concat(a,"):"),e),e instanceof Error&&"AbortError"===e.name&&(console.error("Request timed out after ".concat(r,"ms")),t===a))throw Error("Request timed out after ".concat(r,"ms - the backend server may be down or overloaded"));if(t===a)throw e;await new Promise(e=>setTimeout(e,1e3*t))}throw Error("All retry attempts failed")}static async fetchRestaurants(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;try{let t=await this.makeRequest("/api/restaurants?limit=".concat(e)),a=[],s=0;return t&&"object"==typeof t&&(Array.isArray(t)?(a=t,s=t.length):t.restaurants&&Array.isArray(t.restaurants)?(a=t.restaurants,s=t.total||t.restaurants.length):(console.warn("Unexpected API response format:",t),a=[],s=0)),{restaurants:a,total:s}}catch(e){return console.error("Failed to fetch restaurants:",e),{restaurants:[],total:0}}}static async searchRestaurants(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;try{let a=await this.makeRequest("/api/restaurants/search?q=".concat(encodeURIComponent(e),"&limit=").concat(t));return{restaurants:a.restaurants||[],total:a.total||0}}catch(e){return console.error("Failed to search restaurants:",e),{restaurants:[],total:0}}}static async getRestaurant(e){try{let t=await this.makeRequest("/api/restaurants/".concat(e));if(!t||"object"!=typeof t)return console.error("Invalid response format for restaurant ".concat(e,":"),t),null;if(!t.id||!t.name)return console.error("Invalid restaurant data for ID ".concat(e,":"),t),null;return t}catch(t){if(404===t.status)return console.warn("Restaurant ".concat(e," not found")),null;return console.error("Failed to fetch restaurant ".concat(e,":"),t),null}}static async getStatistics(){try{return await this.makeRequest("/api/statistics")}catch(e){return console.error("Failed to fetch statistics:",e),{total_restaurants:0,total_cities:0,total_states:0}}}static getMockRestaurants(){return[{id:1,name:"Kosher Deli & Grill",address:"123 Main St",city:"Miami",state:"FL",zip_code:"33101",phone_number:"(305) 555-0123",certifying_agency:"KM",kosher_category:"meat",listing_type:"restaurant",status:"active",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:2,name:"Miami Kosher Market",address:"456 Oak Ave",city:"Miami Beach",state:"FL",zip_code:"33139",phone_number:"(305) 555-0456",certifying_agency:"ORB",kosher_category:"dairy",listing_type:"restaurant",status:"active",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"}]}}let n=e=>r.fetchRestaurants(e),o=()=>r.getMockRestaurants()}},function(e){e.O(0,[265,778,629,971,117,744],function(){return e(e.s=6373)}),_N_E=e.O()}]);