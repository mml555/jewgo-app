(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3218],{1976:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},2029:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(5155),r=a(2115),o=a(5695),n=a(1976);function c(e){var t;let{restaurant:a,className:c=""}=e,i=(0,o.useRouter)(),[l,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),g=()=>a.price_range?a.price_range:a.min_avg_meal_cost&&a.max_avg_meal_cost?"$".concat(a.min_avg_meal_cost," - $").concat(a.max_avg_meal_cost):"Price not available",m=()=>{let e=a.rating||a.star_rating||a.google_rating;return e&&e>0?e:null};return(0,s.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden shadow-md hover:shadow-lg hover:scale-[1.01] transition-all duration-200 cursor-pointer ".concat(c),onClick:()=>{i.push("/restaurant/".concat(a.id))},children:[(0,s.jsxs)("div",{className:"relative aspect-[4/3] overflow-hidden",children:[(0,s.jsx)("img",{src:(()=>{if(a.image_url&&!u)return a.image_url;var e=a.kosher_category||a.listing_type;let t=(null==e?void 0:e.toLowerCase())||"";return t.includes("pizza")?"/images/placeholders/pizza-placeholder.jpg":t.includes("sushi")||t.includes("japanese")?"/images/placeholders/sushi-placeholder.jpg":t.includes("grill")||t.includes("steak")?"/images/placeholders/grill-placeholder.jpg":t.includes("bakery")?"/images/placeholders/bakery-placeholder.jpg":t.includes("cafe")||t.includes("coffee")?"/images/placeholders/cafe-placeholder.jpg":t.includes("ice cream")||t.includes("dessert")?"/images/placeholders/dessert-placeholder.jpg":"/images/default-restaurant.jpg"})(),alt:a.name,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",onError:()=>h(!0),loading:"lazy"}),a.kosher_category&&(0,s.jsx)("span",{className:"absolute top-2 left-2 text-[11px] px-2 py-1 rounded-full shadow-sm font-medium ".concat("meat"===a.kosher_category?"bg-red-100 text-red-800":"dairy"===a.kosher_category?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:"meat"===a.kosher_category?"\uD83E\uDD69 Meat":"dairy"===a.kosher_category?"\uD83E\uDD5B Dairy":"\uD83E\uDD6C Pareve"}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),d(!l)},className:"absolute top-2 right-2 bg-white p-1 rounded-full shadow hover:scale-105 transition-all duration-200","aria-label":l?"Remove from favorites":"Add to favorites",children:(0,s.jsx)(n.A,{className:"w-5 h-5 ".concat(l?"fill-red-500 text-red-500":"text-red-400")})})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium truncate mb-1 group-hover:text-green-600 transition-colors",children:(t=a.name)?t.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()):""}),g()&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 truncate mb-1",children:["Price range ",g()]}),m()&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-yellow-500 text-sm",children:[(0,s.jsx)("svg",{className:"w-4 h-4 fill-current",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),(0,s.jsx)("span",{className:"text-gray-700",children:m().toFixed(2)})]})]})]})}},3084:(e,t,a)=>{Promise.resolve().then(a.bind(a,9545))},8077:(e,t,a)=>{"use strict";a.d(t,{FB:()=>n,Fm:()=>o});let s="https://jewgo.onrender.com";class r{static async wakeUpBackend(){try{return console.log("Attempting to wake up backend service..."),(await fetch("".concat(s,"/"),{method:"GET",signal:AbortSignal.timeout(5e3)})).ok}catch(e){return console.log("Wake-up attempt failed, continuing with normal request..."),!1}}static async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15e3,o="".concat(s).concat(e),n={...t,headers:{"Content-Type":"application/json",Accept:"application/json",...t.headers}};for(let t=1;t<=a;t++)try{console.log("API request attempt ".concat(t,"/").concat(a,": ").concat(o)),1===t&&e.includes("/api/restaurants")&&await this.wakeUpBackend();let s=new AbortController,c=setTimeout(()=>s.abort(),r),i=await fetch(o,{...n,signal:s.signal});if(clearTimeout(c),!i.ok){let e={message:"HTTP error! status: ".concat(i.status),status:i.status,retryable:i.status>=500||429===i.status};if(404===i.status)throw e;if(e.retryable&&t<a){console.warn("Retryable error, attempting retry ".concat(t+1,"/").concat(a)),await new Promise(e=>setTimeout(e,1e3*t));continue}throw e}let l=i.headers.get("content-type");if(l&&l.includes("application/json")){let e=await i.json();return console.log("API request successful: ".concat(o)),e}throw Error("Invalid response format - expected JSON")}catch(e){if(console.error("API request failed (attempt ".concat(t,"/").concat(a,"):"),e),e instanceof Error&&"AbortError"===e.name&&(console.error("Request timed out after ".concat(r,"ms")),t===a))throw Error("Request timed out after ".concat(r,"ms - the backend server may be down or overloaded"));if(t===a)throw e;await new Promise(e=>setTimeout(e,1e3*t))}throw Error("All retry attempts failed")}static async fetchRestaurants(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;try{let t=await this.makeRequest("/api/restaurants?limit=".concat(e)),a=[],s=0;return t&&"object"==typeof t&&(Array.isArray(t)?(a=t,s=t.length):t.restaurants&&Array.isArray(t.restaurants)?(a=t.restaurants,s=t.total||t.restaurants.length):(console.warn("Unexpected API response format:",t),a=[],s=0)),{restaurants:a,total:s}}catch(e){return console.error("Failed to fetch restaurants:",e),{restaurants:[],total:0}}}static async searchRestaurants(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;try{let a=await this.makeRequest("/api/restaurants/search?q=".concat(encodeURIComponent(e),"&limit=").concat(t));return{restaurants:a.restaurants||[],total:a.total||0}}catch(e){return console.error("Failed to search restaurants:",e),{restaurants:[],total:0}}}static async getRestaurant(e){try{let t=await this.makeRequest("/api/restaurants/".concat(e));if(!t||"object"!=typeof t)return console.error("Invalid response format for restaurant ".concat(e,":"),t),null;if(!t.id||!t.name)return console.error("Invalid restaurant data for ID ".concat(e,":"),t),null;return t}catch(t){if(404===t.status)return console.warn("Restaurant ".concat(e," not found")),null;return console.error("Failed to fetch restaurant ".concat(e,":"),t),null}}static async getStatistics(){try{return await this.makeRequest("/api/statistics")}catch(e){return console.error("Failed to fetch statistics:",e),{total_restaurants:0,total_cities:0,total_states:0}}}static getMockRestaurants(){return[{id:1,name:"Kosher Deli & Grill",address:"123 Main St",city:"Miami",state:"FL",zip_code:"33101",phone_number:"(305) 555-0123",certifying_agency:"KM",kosher_category:"meat",listing_type:"restaurant",status:"active",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:2,name:"Miami Kosher Market",address:"456 Oak Ave",city:"Miami Beach",state:"FL",zip_code:"33139",phone_number:"(305) 555-0456",certifying_agency:"ORB",kosher_category:"dairy",listing_type:"restaurant",status:"active",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"}]}}let o=e=>r.fetchRestaurants(e),n=()=>r.getMockRestaurants()},9545:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(5155),r=a(2115),o=a(5695),n=a(7288),c=a(6395),i=a(7242),l=a(7976),d=a(2029),u=a(4284),h=a(8077);function g(){let e=(0,o.useRouter)(),[t,a]=(0,r.useState)([]),[g,m]=(0,r.useState)([]),[p,y]=(0,r.useState)(!0),[f,x]=(0,r.useState)(""),[v,w]=(0,r.useState)("shuls"),[b,_]=(0,r.useState)({});return((0,r.useEffect)(()=>{(async()=>{try{y(!0);let e=(await (0,h.Fm)()).restaurants.filter(e=>{var t,a;return(null==(t=e.listing_type)?void 0:t.toLowerCase().includes("synagogue"))||(null==(a=e.listing_type)?void 0:a.toLowerCase().includes("shul"))||e.name.toLowerCase().includes("synagogue")||e.name.toLowerCase().includes("shul")||e.name.toLowerCase().includes("temple")});a(e),m(e)}catch(e){console.error("Error loading synagogue locations:",e)}finally{y(!1)}})()},[]),(0,r.useEffect)(()=>{let e=t;f.trim()&&(e=e.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())||e.city.toLowerCase().includes(f.toLowerCase())||e.certifying_agency.toLowerCase().includes(f.toLowerCase()))),m(e)},[t,f]),p)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-gray-500",children:"Loading synagogue locations..."})}):(0,s.jsxs)("div",{className:"min-h-screen bg-neutral-50",children:[(0,s.jsx)(n.A,{}),(0,s.jsx)("div",{className:"px-4 sm:px-6 py-4 bg-white border-b border-gray-100",children:(0,s.jsx)(c.A,{onSearch:e=>{x(e)},placeholder:"Search for synagogues...",showAdvancedFilters:!0,useGoogleAPI:!1})}),(0,s.jsx)("div",{className:"px-4 sm:px-6 py-2 bg-white border-b border-gray-100",children:(0,s.jsx)(i.A,{activeTab:v,onTabChange:t=>{switch(w(t),t){case"mikvahs":e.push("/mikvahs");break;case"shuls":break;case"specials":e.push("/specials");break;case"eatery":e.push("/eatery");break;case"stores":e.push("/stores")}}})}),(0,s.jsx)("div",{className:"px-4 sm:px-6 py-3 bg-white border-b border-gray-100",children:(0,s.jsx)(l.A,{onShowFilters:()=>{},onShowMap:()=>window.location.href="/live-map",onAddEatery:()=>window.location.href="/add-eatery",onFilterChange:(e,t)=>{_(a=>({...a,[e]:t}))},onToggleFilter:(e,t)=>{_(a=>({...a,[e]:t}))},onDistanceChange:e=>{_(t=>({...t,distanceRadius:e}))},onClearAll:()=>{_({})},onLocationReset:()=>{},activeFilters:b,userLocation:null,locationLoading:!1,hasActiveFilters:Object.values(b).some(e=>void 0!==e&&!1!==e&&""!==e),isOnMapPage:!1})}),(0,s.jsxs)("div",{className:"px-4 sm:px-6 py-3 bg-gray-50 text-sm text-gray-600 border-b border-gray-200",children:[g.length," ",1===g.length?"synagogue":"synagogues"," found"]}),(0,s.jsxs)("div",{className:"px-4 py-6 pb-24",children:[(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:g.map(e=>(0,s.jsx)(d.A,{restaurant:e},e.id))}),0===g.length&&!p&&(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"text-gray-500 text-lg mb-3 font-medium",children:"No synagogues found"}),(0,s.jsx)("div",{className:"text-gray-400 text-sm",children:"Try adjusting your search or filters"})]})]}),(0,s.jsx)(u.A,{})]})}}},e=>{e.O(0,[6635,2884,2084,8441,5964,7358],()=>e(e.s=3084)),_N_E=e.O()}]);