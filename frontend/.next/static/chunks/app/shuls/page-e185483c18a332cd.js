(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{6373:function(e,t,a){Promise.resolve().then(a.bind(a,5989))},5989:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var s=a(7437),r=a(2265),o=a(9376),n=a(4196),c=a(3373),i=a(3097),l=a(5219),u=a(681),d=a(4950),h=a(2535);function m(){let e=(0,o.useRouter)(),[t,a]=(0,r.useState)([]),[m,g]=(0,r.useState)([]),[p,y]=(0,r.useState)(!0),[f,x]=(0,r.useState)(""),[w,v]=(0,r.useState)("shuls"),[b,_]=(0,r.useState)({});return((0,r.useEffect)(()=>{(async()=>{try{y(!0);let e=(await (0,h.Nx)()).restaurants.filter(e=>{var t,a;return(null===(t=e.listing_type)||void 0===t?void 0:t.toLowerCase().includes("synagogue"))||(null===(a=e.listing_type)||void 0===a?void 0:a.toLowerCase().includes("shul"))||e.name.toLowerCase().includes("synagogue")||e.name.toLowerCase().includes("shul")||e.name.toLowerCase().includes("temple")});a(e),g(e)}catch(e){console.error("Error loading synagogue locations:",e)}finally{y(!1)}})()},[]),(0,r.useEffect)(()=>{let e=t;f.trim()&&(e=e.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())||e.city.toLowerCase().includes(f.toLowerCase())||e.certifying_agency.toLowerCase().includes(f.toLowerCase()))),g(e)},[t,f]),p)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-gray-500",children:"Loading synagogue locations..."})}):(0,s.jsxs)("div",{className:"min-h-screen bg-neutral-50",children:[(0,s.jsx)(n.Z,{}),(0,s.jsx)("div",{className:"px-4 sm:px-6 py-4 bg-white border-b border-gray-100",children:(0,s.jsx)(c.Z,{onSearch:e=>{x(e)},placeholder:"Search for synagogues...",showAdvancedFilters:!0,useGoogleAPI:!1})}),(0,s.jsx)("div",{className:"px-4 sm:px-6 py-2 bg-white border-b border-gray-100",children:(0,s.jsx)(i.Z,{activeTab:w,onTabChange:t=>{switch(v(t),t){case"mikvahs":e.push("/mikvahs");break;case"shuls":break;case"specials":e.push("/specials");break;case"eatery":e.push("/eatery");break;case"stores":e.push("/stores")}}})}),(0,s.jsx)("div",{className:"px-4 sm:px-6 py-3 bg-white border-b border-gray-100",children:(0,s.jsx)(l.Z,{onShowFilters:()=>{},onShowMap:()=>window.location.href="/live-map",onAddEatery:()=>window.location.href="/add-eatery",onFilterChange:(e,t)=>{_(a=>({...a,[e]:t}))},onToggleFilter:(e,t)=>{_(a=>({...a,[e]:t}))},onDistanceChange:e=>{_(t=>({...t,distanceRadius:e}))},onClearAll:()=>{_({})},onLocationReset:()=>{},activeFilters:b,userLocation:null,locationLoading:!1,hasActiveFilters:Object.values(b).some(e=>void 0!==e&&!1!==e&&""!==e),isOnMapPage:!1})}),(0,s.jsxs)("div",{className:"px-4 sm:px-6 py-3 bg-gray-50 text-sm text-gray-600 border-b border-gray-200",children:[m.length," ",1===m.length?"synagogue":"synagogues"," found"]}),(0,s.jsxs)("div",{className:"px-4 py-6",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:m.map(e=>(0,s.jsx)(u.Z,{restaurant:e},e.id))}),0===m.length&&!p&&(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"text-gray-500 text-lg mb-3 font-medium",children:"No synagogues found"}),(0,s.jsx)("div",{className:"text-gray-400 text-sm",children:"Try adjusting your search or filters"})]})]}),(0,s.jsx)(d.Z,{})]})}},681:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(7437),r=a(2265),o=a(9376);let n=(0,a(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var c=a(6595);function i(e){let{restaurant:t,className:a=""}=e,i=(0,o.useRouter)(),[l,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden cursor-pointer hover:shadow-lg hover:scale-[1.02] transition-all duration-300 ".concat(a),onClick:()=>{i.push("/restaurant/".concat(t.id))},children:[(0,s.jsxs)("div",{className:"relative aspect-[4/3] overflow-hidden",children:[(0,s.jsx)("img",{src:t.image_url&&!d?t.image_url:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400&h=300&fit=crop&crop=center",alt:t.name,className:"w-full h-full object-cover",onError:()=>h(!0)}),(0,s.jsx)("div",{className:"absolute top-2 left-2",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat((e=>{let t=e.toLowerCase();return"dairy"===t?"bg-blue-100 text-blue-800":"meat"===t?"bg-[#A70000] text-white":"bg-yellow-100 text-yellow-800"})(t.kosher_category)),children:(e=>{let t=e.toLowerCase();return"dairy"===t?"Dairy":"meat"===t?"Meat":"Pareve"})(t.kosher_category)})}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),u(!l)},className:"absolute top-2 right-2 bg-white bg-opacity-80 rounded-full p-1.5 hover:bg-opacity-100 hover:scale-110 transition-all duration-200","aria-label":l?"Remove from favorites":"Add to favorites",children:(0,s.jsx)(n,{className:"w-5 h-5 ".concat(l?"fill-red-500 text-red-500":"text-gray-800 hover:text-red-400")})})]}),(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-1 line-clamp-1",children:t.name}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:t.price_range?t.price_range:t.min_avg_meal_cost&&t.max_avg_meal_cost?"$".concat(t.min_avg_meal_cost," - $").concat(t.max_avg_meal_cost):"Price not available"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c.Z,{className:"w-3.5 h-3.5 text-yellow-400 fill-current"}),(0,s.jsx)("span",{className:"ml-1 text-xs font-medium text-gray-700",children:(t.rating||t.star_rating||t.google_rating||0).toFixed(1)})]})]})]})}},2535:function(e,t,a){"use strict";a.d(t,{Nx:function(){return o},g:function(){return n}});let s="https://jewgo.onrender.com";class r{static async wakeUpBackend(){try{return console.log("Attempting to wake up backend service..."),(await fetch("".concat(s,"/"),{method:"GET",signal:AbortSignal.timeout(5e3)})).ok}catch(e){return console.log("Wake-up attempt failed, continuing with normal request..."),!1}}static async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15e3,o="".concat(s).concat(e),n={...t,headers:{"Content-Type":"application/json",Accept:"application/json",...t.headers}};for(let t=1;t<=a;t++)try{console.log("API request attempt ".concat(t,"/").concat(a,": ").concat(o)),1===t&&e.includes("/api/restaurants")&&await this.wakeUpBackend();let s=new AbortController,c=setTimeout(()=>s.abort(),r),i=await fetch(o,{...n,signal:s.signal});if(clearTimeout(c),!i.ok){let e={message:"HTTP error! status: ".concat(i.status),status:i.status,retryable:i.status>=500||429===i.status};if(404===i.status)throw e;if(e.retryable&&t<a){console.warn("Retryable error, attempting retry ".concat(t+1,"/").concat(a)),await new Promise(e=>setTimeout(e,1e3*t));continue}throw e}let l=i.headers.get("content-type");if(l&&l.includes("application/json")){let e=await i.json();return console.log("API request successful: ".concat(o)),e}throw Error("Invalid response format - expected JSON")}catch(e){if(console.error("API request failed (attempt ".concat(t,"/").concat(a,"):"),e),e instanceof Error&&"AbortError"===e.name&&(console.error("Request timed out after ".concat(r,"ms")),t===a))throw Error("Request timed out after ".concat(r,"ms - the backend server may be down or overloaded"));if(t===a)throw e;await new Promise(e=>setTimeout(e,1e3*t))}throw Error("All retry attempts failed")}static async fetchRestaurants(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;try{let t=await this.makeRequest("/api/restaurants?limit=".concat(e)),a=[],s=0;return t&&"object"==typeof t&&(Array.isArray(t)?(a=t,s=t.length):t.restaurants&&Array.isArray(t.restaurants)?(a=t.restaurants,s=t.total||t.restaurants.length):(console.warn("Unexpected API response format:",t),a=[],s=0)),{restaurants:a,total:s}}catch(e){return console.error("Failed to fetch restaurants:",e),{restaurants:[],total:0}}}static async searchRestaurants(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;try{let a=await this.makeRequest("/api/restaurants/search?q=".concat(encodeURIComponent(e),"&limit=").concat(t));return{restaurants:a.restaurants||[],total:a.total||0}}catch(e){return console.error("Failed to search restaurants:",e),{restaurants:[],total:0}}}static async getRestaurant(e){try{let t=await this.makeRequest("/api/restaurants/".concat(e));if(!t||"object"!=typeof t)return console.error("Invalid response format for restaurant ".concat(e,":"),t),null;if(!t.id||!t.name)return console.error("Invalid restaurant data for ID ".concat(e,":"),t),null;return t}catch(t){if(404===t.status)return console.warn("Restaurant ".concat(e," not found")),null;return console.error("Failed to fetch restaurant ".concat(e,":"),t),null}}static async getStatistics(){try{return await this.makeRequest("/api/statistics")}catch(e){return console.error("Failed to fetch statistics:",e),{total_restaurants:0,total_cities:0,total_states:0}}}static getMockRestaurants(){return[{id:1,name:"Kosher Deli & Grill",address:"123 Main St",city:"Miami",state:"FL",zip_code:"33101",phone_number:"(305) 555-0123",certifying_agency:"KM",kosher_category:"meat",listing_type:"restaurant",status:"active",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:2,name:"Miami Kosher Market",address:"456 Oak Ave",city:"Miami Beach",state:"FL",zip_code:"33139",phone_number:"(305) 555-0456",certifying_agency:"ORB",kosher_category:"dairy",listing_type:"restaurant",status:"active",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"}]}}let o=e=>r.fetchRestaurants(e),n=()=>r.getMockRestaurants()}},function(e){e.O(0,[265,778,629,971,117,744],function(){return e(e.s=6373)}),_N_E=e.O()}]);