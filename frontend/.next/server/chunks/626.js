"use strict";exports.id=626,exports.ids=[626],exports.modules={3626:(e,t,s)=>{s.d(t,{Z:()=>i});var a=s(10326),l=s(17577);s(88906);var o=s(77867);function i({onSearch:e,placeholder:t="Search restaurants, agencies, or dietary preferences..."}){let[s,i]=(0,l.useState)(""),[n,r]=(0,l.useState)(!1),[c,u]=(0,l.useState)(!1),[d,h]=(0,l.useState)([]),[g,m]=(0,l.useState)(!1),[p,x]=(0,l.useState)(null),[w,f]=(0,l.useState)(null),[v,y]=(0,l.useState)(0);(0,l.useRef)(),(0,l.useRef)();let b=(0,l.useRef)(null);(0,l.useRef)(null),(0,l.useRef)(null);let P=t=>{i(t),e(t),u(!1),h([]),b.current?.focus()},j=t=>{let s=t.description;i(s),e(s),u(!1),h([]),b.current?.focus()},D=[{label:"ORB Certified",value:"ORB",icon:"✓",color:"bg-agency-orb"},{label:"KM Certified",value:"KM",icon:"\uD83E\uDD5B",color:"bg-agency-km"},{label:"KDM Certified",value:"KDM",icon:"\uD83C\uDF7D️",color:"bg-agency-kdm"},{label:"Diamond K",value:"Diamond K",icon:"\uD83D\uDC8E",color:"bg-agency-diamond-k"},{label:"Meat Restaurants",value:"meat",icon:"\uD83E\uDD69",color:"bg-kosher-meat"},{label:"Dairy Restaurants",value:"dairy",icon:"\uD83E\uDD5B",color:"bg-kosher-dairy"},{label:"Pareve Restaurants",value:"pareve",icon:"\uD83E\uDD6C",color:"bg-kosher-pareve"},{label:"Miami Beach",value:"Miami Beach",icon:"\uD83C\uDFD6️",color:"bg-accent-blue"},{label:"Hollywood FL",value:"Hollywood",icon:"\uD83C\uDFAC",color:"bg-accent-orange"},{label:"Boca Raton",value:"Boca",icon:"\uD83C\uDF34",color:"bg-accent-green"}],N=(0,o.qP)(D,e=>e.label.toLowerCase().includes(s.toLowerCase())||e.value.toLowerCase().includes(s.toLowerCase())),k=d.length>0,C=N.length>0,S=c&&(s.length>0||n);return(0,a.jsxs)("div",{className:"relative",children:[a.jsx("form",{onSubmit:e=>e.preventDefault(),children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:a.jsx("svg",{className:`h-5 w-5 transition-colors duration-200 ${n?"text-jewgo-400":"text-neutral-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("input",{ref:b,type:"text",placeholder:t,value:s,onChange:e=>{let t=e.target.value;i(t),u(t.length>0),x(null)},onFocus:()=>{r(!0),s.length>0&&u(!0)},onBlur:()=>{r(!1),setTimeout(()=>{u(!1),h([])},200)},onKeyDown:e=>{"Escape"===e.key&&(u(!1),h([]),b.current?.blur())},className:"w-full pl-12 pr-12 py-2.5 sm:py-3 rounded-xl bg-white border border-neutral-300 focus:border-jewgo-400 focus:ring-jewgo-400/20 focus:outline-none transition-all duration-200 shadow-soft text-base",autoComplete:"off"}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s&&a.jsx("button",{type:"button",onClick:()=>{i(""),e(""),h([]),x(null),f(null),y(0),b.current?.focus()},className:"p-1 text-neutral-400 hover:text-jewgo-400 transition-colors duration-200",title:"Clear search",children:a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})})]})}),S&&a.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-neutral-200 rounded-xl shadow-strong z-50 animate-fade-in-up max-h-80 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-2",children:[s.length>0&&(0,a.jsxs)("div",{className:"text-xs text-neutral-500 px-3 py-1 border-b border-neutral-100 mb-2",children:['Search suggestions for "',s,'"']}),k&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("div",{className:"text-xs text-neutral-500 px-3 py-1 mb-2 flex items-center",children:[(0,a.jsxs)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Locations & Places"]}),a.jsx("div",{className:"space-y-1",children:d.slice(0,5).map(e=>(0,a.jsxs)("button",{onClick:()=>j(e),className:"w-full text-left px-3 py-2 text-sm text-neutral-700 hover:bg-neutral-50 rounded-lg transition-colors duration-200 flex items-center space-x-3",children:[a.jsx("span",{className:"w-2 h-2 bg-accent-blue rounded-full flex-shrink-0"}),a.jsx("span",{className:"text-sm",children:"\uD83D\uDCCD"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium",children:e.structured_formatting.main_text}),a.jsx("div",{className:"text-xs text-neutral-500",children:e.structured_formatting.secondary_text})]})]},e.place_id))})]}),p&&a.jsx("div",{className:"px-3 py-2 text-sm text-status-error bg-status-error-light rounded-lg mb-2",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),p]})}),g&&(0,a.jsxs)("div",{className:"px-3 py-2 text-sm text-neutral-500 flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-jewgo-400 mr-2"}),"Searching locations..."]}),C&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-xs text-neutral-500 px-3 py-1 mb-2 flex items-center",children:[a.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Quick Searches"]}),a.jsx("div",{className:"space-y-1",children:N.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>P(e.value),className:"w-full text-left px-3 py-2 text-sm text-neutral-700 hover:bg-neutral-50 rounded-lg transition-colors duration-200 flex items-center space-x-3",children:[a.jsx("span",{className:`w-2 h-2 ${e.color} rounded-full flex-shrink-0`}),a.jsx("span",{className:"text-sm",children:e.icon}),a.jsx("span",{className:"flex-1",children:e.label})]},t))})]}),!k&&!C&&!g&&!p&&s.length>0&&(0,a.jsxs)("div",{className:"px-3 py-2 text-sm text-neutral-500",children:['No suggestions found for "',s,'"']}),!s&&!k&&!C&&!p&&(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-neutral-500 px-3 py-1",children:"Popular searches"}),D.slice(0,5).map((e,t)=>(0,a.jsxs)("button",{onClick:()=>P(e.value),className:"w-full text-left px-3 py-2 text-sm text-neutral-700 hover:bg-neutral-50 rounded-lg transition-colors duration-200 flex items-center space-x-3",children:[a.jsx("span",{className:`w-2 h-2 ${e.color} rounded-full flex-shrink-0`}),a.jsx("span",{className:"text-sm",children:e.icon}),a.jsx("span",{className:"flex-1",children:e.label})]},t))]})]})})]})}},88906:(e,t,s)=>{s.d(t,{Ll:()=>l,MK:()=>o});class a{static getInstance(){return a.instance||(a.instance=new a),a.instance}getCachedData(e){let t=this.cache.get(e);return t&&Date.now()-t.timestamp<t.ttl?t.data:(t&&this.cache.delete(e),null)}setCachedData(e,t,s=this.DEFAULT_CACHE_TTL){this.cache.set(e,{data:t,timestamp:Date.now(),ttl:s})}cleanupCache(){let e=Date.now(),t=[];this.cache.forEach((s,a)=>{e-s.timestamp>s.ttl&&t.push(a)}),t.forEach(e=>{this.cache.delete(e)})}async initialize(){if(this.isInitialized){console.log("Google Places API already initialized, skipping...");return}if(this.initPromise)return console.log("Google Places API initialization already in progress, waiting..."),this.initPromise;let e=Date.now();if(e-this.lastInitAttempt<this.INIT_RETRY_DELAY){console.log("Google Places API initialization retry too soon, skipping...");return}this.lastInitAttempt=e,console.log("Initializing Google Places API..."),this.initPromise=new Promise((e,t)=>{let s=0,a=()=>{if(s++,window.google&&window.google.maps&&window.google.maps.places){this.isInitialized=!0,console.log("Google Places API initialized successfully"),e();return}if(s>=300){let e="Google Maps failed to load within 30 seconds. Please check your internet connection and try again.";console.error(e),t(Error(e));return}setTimeout(a,100)};if(!process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY){let e="Google Maps API key is missing. Please set NEXT_PUBLIC_GOOGLE_MAPS_API_KEY in your environment variables.";console.error(e),t(Error(e));return}a()});try{await this.initPromise}catch(e){throw this.isInitialized=!1,this.initPromise=null,e}return this.initPromise}resetInitialization(){this.isInitialized=!1,this.initPromise=null,this.lastInitAttempt=0,console.log("Google Places API initialization state reset")}isReady(){return this.isInitialized&&!!(window.google&&window.google.maps&&window.google.maps.places)}clearCache(){this.cache.clear(),console.log("Google Places API cache cleared")}getCacheStats(){return this.cleanupCache(),{size:this.cache.size,keys:Array.from(this.cache.keys())}}async searchPlaces(e,t={}){await this.initialize();try{let s=`search:${e}:${JSON.stringify(t)}`,a=this.getCachedData(s);if(a)return console.log("Using cached search result for:",e),a;let l={query:e,location:t.location?new google.maps.LatLng(t.location.lat,t.location.lng):void 0,radius:t.radius,types:t.types},o=await new Promise((e,s)=>{let a=document.createElement("div");window.google.maps.places.Place?new window.google.maps.places.Place(a).textSearch(l,(s,a)=>{a===window.google.maps.places.PlacesServiceStatus.OK&&s?e(s.slice(0,t.limit||20)):e([])}):new window.google.maps.places.PlacesService(a).textSearch(l,(s,a)=>{a===window.google.maps.places.PlacesServiceStatus.OK&&s?e(s.slice(0,t.limit||20)):e([])})});return this.setCachedData(s,o,3e5),console.log("Cached search result for:",e),o}catch(e){return console.error("Error searching places:",e),[]}}async getPlacePredictions(e,t={}){await this.initialize();try{let s={input:e,types:t.types||["establishment"],location:t.location?new google.maps.LatLng(t.location.lat,t.location.lng):void 0,radius:t.radius,componentRestrictions:t.country?{country:t.country}:void 0};return new Promise((e,t)=>{window.google.maps.places.AutocompleteSuggestion?new window.google.maps.places.AutocompleteSuggestion().getPlacePredictions(s).then(t=>{e(t.predictions||[])}).catch(t=>{console.error("AutocompleteSuggestion error:",t),e([])}):window.google.maps.places.AutocompleteService?new window.google.maps.places.AutocompleteService().getPlacePredictions(s,(t,s)=>{s===window.google.maps.places.PlacesServiceStatus.OK&&t?e(t):e([])}):e([])})}catch(e){return console.error("Error getting place predictions:",e),[]}}async getPlaceDetails(e,t=["name","formatted_address","geometry","rating","user_ratings_total","photos","opening_hours","website","formatted_phone_number","price_level"]){await this.initialize();try{let s={placeId:e,fields:t};return new Promise((e,t)=>{let a=document.createElement("div");window.google.maps.places.Place?new window.google.maps.places.Place(a).getDetails(s,(t,s)=>{s===window.google.maps.places.PlacesServiceStatus.OK&&t?e(t):e(null)}):new window.google.maps.places.PlacesService(a).getDetails(s,(t,s)=>{s===window.google.maps.places.PlacesServiceStatus.OK&&t?e(t):e(null)})})}catch(e){return console.error("Error getting place details:",e),null}}constructor(){this.isInitialized=!1,this.initPromise=null,this.lastInitAttempt=0,this.INIT_RETRY_DELAY=6e4,this.cache=new Map,this.DEFAULT_CACHE_TTL=3e5}}let l=a.getInstance();async function o(e,t={}){return l.searchPlaces(e,t)}},77867:(e,t,s)=>{function a(e,t){if(!e||!Array.isArray(e))return console.warn("safeFilter: Input is not an array:",typeof e,e),[];try{return e.filter(t)}catch(e){return console.error("safeFilter error:",e),[]}}s.d(t,{qP:()=>a})}};