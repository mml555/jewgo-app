(()=>{var e={};e.id=773,e.ids=[773],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},76907:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>g,tree:()=>c}),a(23245),a(11506),a(35866);var s=a(23191),r=a(88716),n=a(37922),l=a.n(n),i=a(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let c=["",{children:["live-map",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,23245)),"/Users/mendell/jewgo app/frontend/app/live-map/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,11506)),"/Users/mendell/jewgo app/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/mendell/jewgo app/frontend/app/live-map/page.tsx"],u="/live-map/page",m={require:a,loadChunk:()=>Promise.resolve()},g=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/live-map/page",pathname:"/live-map",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},65038:(e,t,a)=>{Promise.resolve().then(a.bind(a,10450))},10450:(e,t,a)=>{"use strict";a.d(t,{default:()=>h});var s=a(10326),r=a(17577),n=a(35047),l=a(96968),i=a(28150),o=a(70540),c=a(77867);function d({restaurants:e,onRestaurantSelect:t,selectedRestaurantId:a,userLocation:n,mapCenter:l,className:i="h-96"}){let[o,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),[g,x]=(0,r.useState)(null),p=(0,r.useRef)(null),h=(0,r.useRef)(null);(0,r.useRef)([]),(0,r.useRef)(null),(0,r.useRef)(null);let[b,v]=(0,r.useState)(!1),y=(0,c.qP)(e,e=>{if(!e.latitude||!e.longitude)return!1;let t=parseFloat(e.latitude.toString()),a=parseFloat(e.longitude.toString());return!isNaN(t)&&!isNaN(a)});return(console.log("InteractiveRestaurantMap Debug:",{totalRestaurants:e.length,restaurantsWithCoords:y.length,userLocation:!!n,mapCenter:!!l}),b||u)?u?s.jsx("div",{className:`bg-gray-100 rounded-lg flex items-center justify-center ${i}`,children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-500 text-4xl mb-4",children:"⚠️"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Map Error"}),s.jsx("p",{className:"text-gray-600 mb-4",children:u})]})}):0===y.length?s.jsx("div",{className:`bg-gray-100 rounded-lg flex items-center justify-center ${i}`,children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"\uD83D\uDDFA️"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Location Data"}),s.jsx("p",{className:"text-gray-600",children:"No restaurants with location data available"})]})}):(0,s.jsxs)("div",{className:`relative bg-white rounded-lg shadow-lg overflow-hidden ${i}`,children:[s.jsx("div",{ref:p,className:"w-full h-full"}),s.jsx("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-lg px-3 py-2 shadow-lg",children:(0,s.jsxs)("div",{className:"text-xs font-medium text-gray-700",children:[y.length," restaurants",n&&s.jsx("span",{className:"text-blue-600 ml-2",children:"\uD83D\uDCCD Your location"})]})}),(0,s.jsxs)("div",{className:"absolute top-4 left-4 bg-white/95 backdrop-blur-sm rounded-lg px-3 py-2 shadow-lg",children:[s.jsx("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"Kosher Types:"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Meat"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Dairy"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Pareve"})]})]})]}),n&&s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx("button",{onClick:()=>{h.current&&n&&(h.current.panTo(new window.google.maps.LatLng(n.latitude,n.longitude)),h.current.setZoom(10))},className:"bg-white/95 backdrop-blur-sm rounded-lg p-2 shadow-lg hover:bg-white transition-colors",title:"Center on your location",children:s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})})})})]}):s.jsx("div",{className:`bg-gray-100 rounded-lg flex items-center justify-center ${i}`,children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-jewgo-primary mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading interactive map..."})]})})}var u=a(86871),m=a(86255),g=a(89692),x=a(68263),p=a(92366);function h(){(0,n.useSearchParams)();let[e,t]=(0,r.useState)([]),[a,c]=(0,r.useState)([]),[h,b]=(0,r.useState)(!0),[v,y]=(0,r.useState)(null),[j,f]=(0,r.useState)(""),[N,w]=(0,r.useState)(null),[S,P]=(0,r.useState)(null),[L,C]=(0,r.useState)(!1),[A,R]=(0,r.useState)(null),[k,_]=(0,r.useState)({}),[D,I]=(0,r.useState)(null),[M,$]=(0,r.useState)("eatery"),[q,E]=(0,r.useState)(!1),[F,U]=(0,r.useState)(!1),[Z,G]=(0,r.useState)(!1);(0,r.useCallback)(async()=>{try{b(!0),y(null),console.log("Live map fetching restaurants...");let e=await (0,p.Nx)(1e3);if(console.log("Live map restaurants fetched:",e.restaurants?.length||0),e&&e.restaurants&&Array.isArray(e.restaurants)&&e.restaurants.length>0){let a=e.restaurants.filter(e=>e&&"object"==typeof e&&e.id);a.length!==e.restaurants.length&&console.warn(`Live map filtered out ${e.restaurants.length-a.length} invalid restaurants from API response`),t(a)}else console.warn("Live map no valid restaurants received from API, using mock data"),t((0,p.g)()),y("Using fallback data - API temporarily unavailable")}catch(e){console.error("Live map error fetching restaurants:",e),console.log("Live map falling back to mock data"),t((0,p.g)()),y("Using fallback data - API temporarily unavailable")}finally{b(!1)}},[]);let T=e=>{switch(e){case 1:return"Location access denied. Please enable location services.";case 2:return"Location unavailable. Please try again.";case 3:return"Location request timed out. Please try again.";default:return"Unable to get your location. Please try again."}},H=()=>{f(""),_({})},O=()=>!!j.trim()||Object.values(k).some(e=>void 0!==e&&!1!==e&&""!==e);return h?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"text-gray-500",children:"Loading restaurants..."})}):v?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-red-500",children:["Error: ",v]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-neutral-50",children:[s.jsx(l.Z,{}),s.jsx("div",{className:"px-4 sm:px-6 py-4 bg-white border-b border-gray-100",children:s.jsx(i.Z,{onSearch:e=>{f(e)},onResultsUpdate:e=>{console.log("Enhanced search results:",e.length,"restaurants"),c(e)}})}),s.jsx("div",{className:"px-4 sm:px-6 py-3 bg-white border-b border-gray-100",children:s.jsx(o.Z,{onShowFilters:()=>{},onShowMap:()=>{},onAddEatery:()=>window.location.href="/add-eatery",onFilterChange:(e,t)=>{_(a=>({...a,[e]:t}))},onToggleFilter:(e,t)=>{_(a=>({...a,[e]:t}))},onDistanceChange:e=>{_(t=>({...t,distanceRadius:e}))},onClearAll:H,onLocationReset:()=>{console.log("Resetting location permission"),localStorage.removeItem("userLocation"),localStorage.removeItem("locationPermissionHandled"),P(null),R(null),U(!1),E(!0)},activeFilters:k,userLocation:S?{lat:S.latitude,lng:S.longitude}:null,locationLoading:L,hasActiveFilters:O(),isOnMapPage:!0})}),s.jsx("div",{className:"px-4 sm:px-6 py-2 bg-white border-b border-gray-100",children:s.jsx(m.Z,{activeTab:M,onTabChange:e=>{$(e)}})}),L&&s.jsx("div",{className:"px-4 py-2 bg-blue-50 text-blue-700 text-sm",children:"Getting your location..."}),A&&(0,s.jsxs)("div",{className:"px-4 py-2 bg-yellow-50 text-yellow-700 text-sm",children:[A,s.jsx("button",{onClick:()=>{if(!navigator.geolocation){R("Geolocation is not supported by this browser.");return}C(!0),R(null),navigator.geolocation.getCurrentPosition(e=>{P({latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy}),C(!1)},e=>{R(T(e.code)),C(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},className:"ml-2 underline hover:no-underline",children:"Try again"})]}),O()&&(0,s.jsxs)("div",{className:"px-4 py-2 bg-gray-50 text-sm text-gray-600 border-b border-gray-200",children:[(()=>{let e=[];return j.trim()&&e.push(`"${j}"`),k.agency&&e.push(`${k.agency} certified`),k.dietary&&e.push(`${k.dietary} only`),k.category&&e.push(`${k.category} cuisine`),k.nearMe&&e.push(`within ${k.distanceRadius||10} miles`),k.openNow&&e.push("open now"),e.length>0?e.join(", "):"All restaurants"})()," • ",a.length," restaurants",s.jsx("button",{onClick:H,className:"ml-2 text-blue-600 hover:text-blue-800 underline",children:"Clear all"})]}),s.jsx("div",{className:"flex-1 relative",children:s.jsx(d,{restaurants:a,userLocation:S,selectedRestaurantId:N?.id,onRestaurantSelect:t=>{w(e.find(e=>e.id===t)||null)},mapCenter:D})}),s.jsx(u.Z,{}),s.jsx(x.Z,{}),q&&s.jsx(g.Z,{onLocationGranted:e=>{console.log("Location granted:",e),P(e),E(!1),localStorage.setItem("userLocation",JSON.stringify(e)),localStorage.setItem("locationPermissionHandled","granted")},onLocationDenied:()=>{console.log("Location denied by user"),E(!1),R("Location access denied"),localStorage.setItem("locationPermissionHandled","denied")},onDismiss:()=>{console.log("Location prompt dismissed"),E(!1),localStorage.setItem("locationPermissionHandled","dismissed")}})]})}},23245:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(19510),r=a(71159);let n=(0,a(68570).createProxy)(String.raw`/Users/mendell/jewgo app/frontend/components/LiveMapClient.tsx#default`);function l(){return s.jsx(r.Suspense,{fallback:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"text-gray-500",children:"Loading map..."})}),children:s.jsx(n,{})})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[216,592],()=>a(76907));module.exports=s})();